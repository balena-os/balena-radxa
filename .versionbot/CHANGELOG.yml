- commits:
    - subject: Ensure wireless powersave if off by default
      hash: 284f1ae2db98ce358cff33c6b780c44f85eb1abd
      body: |
        We disable wireless powersave in order to fix latency issues:
        https://github.com/balena-os/balena-rockpi/issues/49
      footer:
        Changelog-entry: Ensure wireless powersave if off by default
        changelog-entry: Ensure wireless powersave if off by default
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2022.1.3
  title: "'brcmfmac.bb: Update brcmfmac to version that disables powersave'"
  date: 2022-03-24T22:29:15.796Z
- commits:
    - subject: Switch the wifi driver for RockPi 4B to backported brcmfmac driver from
        kernel version 5.4.18
      hash: a724fccbf0c5958e2dc70883ced07c137e1890d3
      body: ""
      footer:
        Changelog-entry: Switch the wifi driver for RockPi 4B to backported brcmfmac
          driver from kernel version 5.4.18
        changelog-entry: Switch the wifi driver for RockPi 4B to backported brcmfmac
          driver from kernel version 5.4.18
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2022.1.2
  title: "'Use brcmfmac'"
  date: 2022-03-24T21:20:21.882Z
- commits:
    - subject: Do not swamp log with deprecation warnings
      hash: bf98a15ab6c47082b5725d6c93d3fed5d607d303
      body: >
        The kernel is swamping logs with a rate limited deprecation warning.
        This

        makes it very difficult to use the logs, so replace the rate limiting

        with a single message.
      footer:
        Changelog-entry: Do not swamp log with deprecation warnings
        changelog-entry: Do not swamp log with deprecation warnings
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested: []
  version: 2022.1.1
  title: "'Supress warnings'"
  date: 2022-03-18T16:30:27.285Z
- commits:
    - subject: Update balena-yocto-scripts to v1.17.0
      hash: b263826d8ffd0eafcfebe8965bd7ae7acabfbdf7
      body: |
        Update balena-yocto-scripts from v1.16.3 to v1.17.0
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.17.0
        changelog-entry: Update balena-yocto-scripts to v1.17.0
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-lib: Fix fetching meta-balena base version"
              hash: d5d838339ed23ecd242092bf4214fe2505ccd181
              body: >
                On an ESR branch the VERSION file contains the ESR version, not
                the

                base meta-balena version.


                Replace it with searching down the git tree for the commit before the

                branch.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-block: Use true/false for ESR variable"
              hash: 24876740b2299d092ea3cd1b54f61a020d12a5ba
              body: |
                Keep the same boolean format as in the rest of the files.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Label ESR hostapps"
              hash: 1c6561daf9f16e579d55305471274e7793dc3619
              body: >
                ESR hostapps need special labels in order to be recognized. This
                commit

                adds the esr-current, esr-next and esr-sunset labels.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: add balena_api_fetch_fleet_tag"
              hash: 2ced90fc432298abf14e00d4ac58cc8eaf003b24
              body: |
                Add a function to retrieve fleet tags.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Set policy on ESR hostapps"
              hash: 6e4d7b3d2ccbd1a5c67d94cc73c4552775ce3b94
              body: >
                ESR hostapps need an esr release-policy in order to be
                recognized.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Pass ESR variable when creating apps"
              hash: 2497bfb59ae16810169718e6d383d0bc9d564a04
              body: >
                ESR hostapps need special labels in order to be recognized. This
                allows

                to add those flags when creating the hostapp.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.17.0
          date: 2022-01-20T12:30:21.992Z
        - commits:
            - subject: "balena-deploy: Deploy passing the latest meta-balena version and not
                tag"
              hash: 9d5fa316dbda3d4782e782abaceed41efe3e5a99
              body: >
                The last meta-balena version and tag might not be the same, like
                in the

                case of ESR branches.


                Fixes #249
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-lib: Add balena_lib_get_meta_balena_base_version"
              hash: 25840dc98e138781e78530be0437f3950970f263
              body: >
                Retrieves the last meta-balena version, which may not be the
                same as the

                last meta-balena tag.


                For example, when we branch an ESR release, the meta-balena branch is

                tagged with the ESR name, like 2.83.x, while the last meta-balena version

                will be a proper semver.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.4
          date: 2022-01-18T09:50:54.889Z
  version: 2.88.4+rev3
  date: 2022-01-21T09:35:52.321Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.3
      hash: a88f90e85106549abdba2577fd2a4ee359f8ede7
      body: |
        Update balena-yocto-scripts from v1.16.2 to v1.16.3
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.3
        changelog-entry: Update balena-yocto-scripts to v1.16.3
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-deploy-block: Check for existing tag only in specific hostapp"
              hash: 8893fd94bc0cc31a7fa7af8a87af68a69fec908d
              body: |
                The same version tag can exist across different hostapps.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.3
          date: 2022-01-17T17:18:11.734Z
  version: 2.88.4+rev2
  date: 2022-01-18T09:29:13.244Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.2
      hash: b3623190c2dd80cbc68450d24e851a26072bdb1c
      body: |
        Update balena-yocto-scripts from v1.16.1 to v1.16.2
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.2
        changelog-entry: Update balena-yocto-scripts to v1.16.2
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-api: Propagate balena API environment, token and OS
                organization"
              hash: 64c2854c85aafebf80e6a13b725ff610ae25a467
              body: >
                This is required to allow building against cloud instances with

                different names for the balenaOS organization and private device types.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-build.sh: Propagate balena API environment and token"
              hash: 35d39c4a400df0552bfb3d875c8a9d1289ad8d4e
              body: |
                This is required to use the API for private slugs.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "prepare-and-start: Propagate balena API environment and token"
              hash: bb7b903e00fc153afea182a330da08a49b72cced
              body: >
                The balena-build.sh script accepts a token in the command line.
                This

                commit modifies the prepare-and-start.sh script to use it if

                available, and also modifies it to take into account the balena

                environment too.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.2
          date: 2022-01-15T16:04:34.389Z
  version: 2.88.4+rev1
  date: 2022-01-15T17:11:16.183Z
- commits:
    - subject: Update meta-balena from v2.85.2 to v2.88.4
      hash: 58475117f60144609c592d9feb41428b480b8036
      body: |
        Update meta-balena from 2.85.2 to 2.88.4
      footer:
        Changelog-entry: Update meta-balena from v2.85.2 to v2.88.4
        changelog-entry: Update meta-balena from v2.85.2 to v2.88.4
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "tests: Add basic checks for data loss during HUP"
              hash: 160fba09251de9fc05b3b3ab7a45e6e4e6ca5586
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: "hostapp-update-hooks: Ensure data breadcrumb is present before HUP"
              hash: 62b25ec26111003ef12bc16fe4890b5c327e6aba
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.88.4
          date: 2021-12-03T18:33:53.449Z
        - commits:
            - subject: "grub-conf: Delay grub boot in os development mode"
              hash: 08b54c04b109341542ff1f2b82d00699369a8280
              body: >
                When using the compile time OS_DEVELOPMENT switch, delay the
                boot so

                the grub menu is displayed and it can be interacted with.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "grub-efi: Allow input/output in OS development mode"
              hash: 7d450dddf397dc045779fa815b5003bd1b1ca7fa
              body: |
                When building with the compile-time OS_DEVELOPMENT switch allow
                grub shell to work.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.88.3
          date: 2021-12-02T17:44:27.982Z
        - commits:
            - subject: "sign-efi.bbclass: Do not deploy the unused .signed symlink"
              hash: 33c3e61eac60dff18a1bfe8e7a69cc31a8b16070
              body: >
                do_deploy:append replaces the original file with its signed
                counterpart,

                the signature just gets ignored for non secure boot setups. The .signed

                symlink was in place for backwards compatibility but nothing is using it

                anymore therefore we can safely remove it.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "sign-gpg.bbclass: Only deploy the detached signature"
              hash: 40ead6aefea6d4ab56c76ec0a968da9b23acc887
              body: >
                The original file should already be deployed, we only need to
                add

                the signature in do_deploy:append. Re-deploying actually causes

                harm when chaining signatures, replacing a signed file with its

                unsigned counterpart.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "kernel-image-initramfs.bb: Ship kernel and matching signature"
              hash: 73c254a9396dcf40ba421d70119400af7d4ef21f
              body: >
                This patch replaces the kernel being shipped with the one that
                we eventually

                sign for EFI - without signing the original file used would be identical

                but after applying signature, the signed version is the one we want to ship.


                It also fixes the file name for the detached signature, which must match

                the name of the associated file.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: Make kexec work under kernel lockdown
              hash: 3f7ab2a82b29cdb5ddbf2be6ae8b384a76be999e
              body: |
                - EFI sign bzImage first
                - GPG sign the result
                - Enable kexec signature check in the kernel
                - Load EFI keys to the kernel keyring
                - Use -s with kexec load command
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.88.2
          date: 2021-12-02T12:47:16.559Z
        - commits:
            - subject: "bluez5: Update to bluez 5.61 from poky honister"
              hash: 1ce83ba3726b77d679818cc8f10e7092cd094328
              body: |
                This commit brings the bluez5 recipe from poky honnister.

                The code originated from poky's honnister branch
                @ 5f87fbf13bd35169a488ca564875974681aafd4f
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.88.1
          date: 2021-12-02T10:41:20.034Z
        - commits:
            - subject: "systemd/timeinit: add HTTPS time synchronisation service"
              hash: 2bb18707557979ed6466f45602de4ecf5b386c57
              body: >
                Add a new timesync-https systemd service to synchronise the
                system

                time at boot using an HTTPS header. The service uses curl to request

                an HTTPS header from either $API_ENDPOINT/connectivity-check (default)

                or the URL defined by the os.network.connectivity.uri field in

                config.json. The URL used *must* return HTTP code 204 (No Content)

                in response to a request so that we can determine that we have full

                network connectivity and are not operating behind a captive portal.


                The date field returned by a valid header is used to set the current

                system time. The date/time derived from the header is assumed to be a

                reasonable source of 'truth' such that it can be used to adjust the

                system time both backwards and forwards. This will compensate for any

                erroneous timestamps saved via fake-hwclock or any invalid data

                read from an RTC.


                The service will exit when a valid response has been received. Poll

                attempts will be made at an increasing interval starting at 2s and

                doubling up to a maximum of 64s. Polling will continue at the maximum

                interval until a valid response has been received.


                This service will provide initial time synchronisation for devices

                where NTP ports have been blocked. For devices where NTP access is

                available it should ensure that any system 'time jump' is only a few

                seconds when NTP synchronisation is eventually achieved. It also

                allows other services to start with a reasonably accurate time

                without having to wait for the NTP synchronisation process to

                complete.


                Services that are ordered after the new time-sync-https-wait target

                can be sure that full network connectivity has been achieved and that

                time has been synchronised with an accuracy of a few seconds.
              footer:
                Change-type: minor
                change-type: minor
                Connects-to: "#1337 #1776 #2044 #2139"
                connects-to: "#1337 #1776 #2044 #2139"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.88.0
          date: 2021-12-01T15:06:07.577Z
        - commits:
            - subject: "tests: Add BeagleBone Black u-boot overlay test"
              hash: d52a1754ba1620773e1f7f124fe382aa73e869eb
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.87.32
          date: 2021-12-01T08:51:25.213Z
        - commits:
            - subject: "resin-update-state.rules: do not run for unnamed partitions"
              hash: bc45916b90e60aa849a2b99903825bce98e36752
              body: >
                When udev runs resin_update_state_probe for a non-balena
                partition

                and ENV{ID_PART_ENTRY_NAME} is undefined it still gets expanded to random

                garbage accidentally lying at the eventual memory address. This can create

                a mess in /dev/disk/by-state e.g. when external devices are connected.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "resin_update_state_probe: do not skip device mapper devices"
              hash: 4a8da59e5cbe2243518ed0591dc376e935a3175d
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.31
          date: 2021-11-30T17:23:29.588Z
        - commits:
            - subject: "tests: Add device specific RevPi Core 3 DIO module test"
              hash: ffd31de2edf0358ede441aa001f5d32069ec8999
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.87.30
          date: 2021-11-30T15:30:47.078Z
        - commits:
            - subject: "common: image-balena: enable developmentMode when OS_DEVELOPMENT=1"
              hash: 14b96077eb1899ebedce64610344989eaf4471cd
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.87.29
          date: 2021-11-29T14:22:50.702Z
        - commits:
            - subject: Add secure boot keys to the flasher boot partition
              hash: e5e1c4446f26d028d1e5b6fbdaeb974d84d0a03f
              body: |
                Having the keys available in the flasher image allows to use the
                flasher image as source to program the keys in the EFI.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Add secure boot keys to the flasher boot partition
                changelog-entry: Add secure boot keys to the flasher boot partition
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.87.28
          date: 2021-11-26T18:00:13.452Z
        - commits:
            - subject: "balena-os: make sure PAM support is not configured"
              hash: abb515f6a0bf5d274af873852ddd4e60cf4ee89e
              body: >
                BalenaOS does not use PAM but some vendor BSPs enable it and
                misconfigure

                the hostOS authentication.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.87.27
          date: 2021-11-25T14:36:15.066Z
        - commits:
            - subject: "tests: add test for filesystem checks"
              hash: a58b4a8d89830d739b8a676b1f8669ead6c03e0e
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: "common: initrdscript: fsck resin-data on boot"
              hash: a035f37b4ae3003b41cd450ab24fffbe178ecdb2
              body: |
                Check resin-data on boot to automatically repair any errors
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.87.26
          date: 2021-11-25T07:36:45.881Z
        - commits:
            - subject: "connectivity: reduce ping interval to minimum"
              hash: b513920cd7d683f6511aee2d190d2e9df924fe87
              body: >
                The interface test uses a simple ping to ensure a specific
                interface

                works. It sends ten packets, and expects ten packets back. However, the

                default interval is one second, which increases the time taken for the

                test while not adding anything of value.


                Reduce the timeout to the minimum non-privileged interval of 2ms.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.87.25
          date: 2021-11-25T02:05:13.102Z
        - commits:
            - subject: "tests: Fix dnsmasq tests in cases where 8.8.8.8 is assigned via DHCP"
              hash: 970704092a2f73e120029464edca5b152296f486
              body: >
                One of the test was making sure we were NOT using the default
                8.8.8.8

                server even though that may be a valid upstream server provided by DHCP/PPP.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.87.24
          date: 2021-11-24T21:35:13.779Z
        - commits:
            - subject: "0-signed-update HUP hook: mount efivarfs if necessary"
              hash: 1a6c772c9266d5fc219939e9304813356f85d34c
              body: >
                The hook tries to read EFI variables from efivarfs but this is
                not always

                mounted within the container. We have already validated that we are running

                in EFI mode therefore we can just check whether it is already mounted

                and eventually mount with no further checks.


                This also adds graceful handling of nonexistent variables since not all

                UEFI implementations come with secure boot support.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.23
          date: 2021-11-24T19:42:32.718Z
        - commits:
            - subject: "grub-efi: Accept no input and output nothing when in secure boot mode"
              hash: ffe2f48ed1e770068eb98affc5b29ae39c244869
              body: >
                At this moment GRUB drops to rescue shell if config is invalid

                or if signatures are missing/wrong. This lets the user disable the signature

                checks altogether.


                With this patch GRUB outputs nothing and accepts no user input if signing

                is configured.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.22
          date: 2021-11-24T16:39:29.277Z
        - commits:
            - subject: "linux-firmware: Include MT7601U firmware"
              hash: 33980c8b9ba464c91f016f9cade4140c278e7037
              body: >
                The MT7601U WiFi driver fails to find its firmware, so it is
                included now.
              footer:
                Change-type: patch
                change-type: patch
                Backport-to: next
                backport-to: next
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.87.21
          date: 2021-11-24T12:49:04.437Z
        - commits:
            - subject: "balena-image: Add balena keys to boot partition if required"
              hash: 14624e33c3a48baf71ac7314fc116e7cb21016c9
              body: >
                When using secure boot, add the balena keys to the boot
                partition.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "grub-conf: Enforce module signing and integrity lockdown on luks
                config"
              hash: 1ba23869473faace427782d2aea07a0b46bfbc0c
              body: >
                When booting in secure mode, enforce signed modules loading and
                integrity

                lockdown.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "distro: balena-os: Add empty SIGN_API"
              hash: b1cce6ee3d921dd8def909d959a48bd0d6805c30
              body: |
                By default do not produce signed images.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "classes: image-balena: Copy signed files if present"
              hash: cad39d9f0bf1630da4084cd9b6650cd612943f7d
              body: >
                Grub requires that the signed files carry the .sig suffix, so
                copy then

                if present.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "classes/sign-gpg: Rename class to sign_gpg"
              hash: b1e37430c2f83c045156057198140ba951ea5c5d
              body: |
                Use a less generic name.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "classes: Rename sign to sign-gpg"
              hash: 07012bebb4e0c309a5f148f1ab70cf6bf4f15053
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "classes: sign: Drop suffix from deployed files"
              hash: d3f05f3f36c1b9d2576e497ca5573dbd2b050efd
              body: |
                This way device repositories do not need to be customized.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "resin-init-flasher: Set fde grub.cfg if secure boot is enabled"
              hash: 5d25ccbec30eacc449783b0b6f9c342befa10924
              body: |
                When secure boot is enabled a special grub.cfg is required.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-image-initramfs: Add secure boot dependencies"
              hash: 68d68cfb4523e4e012f174e91495949461782b9d
              body: >
                When buildinf an initramfs for secure boot add the needed
                dependencies.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "kernel-image-initramfs: Install signed kernel images if available"
              hash: 0af48f7555726e969b19bfe29321babb93f265b5
              body: |
                Signed images are needed for secure boot.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "kernel-balena: Configure for secure boot"
              hash: 52259791b2cc2bfd121255e009808bc5677fde0d
              body: |
                On secure boot builds, configure the kernel accordingly.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.87.20
          date: 2021-11-23T16:12:35.703Z
        - commits:
            - subject: "common: enable multi-label mDNS resolution and IPv6"
              hash: 7d50c2b78a2c97172c9bdc558e835c8caf7a80ab
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.87.19
          date: 2021-11-22T22:45:22.434Z
        - commits:
            - subject: unwrap flasher images in os suite if needed
              hash: e377cdf05d8d3baf456391889978a7a7bd49e9f0
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
            - subject: bluetooth and hup test with qemu
              hash: 2bf53fbce9bd2173b60253347a2e0c33d4c06e46
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.87.18
          date: 2021-11-22T17:26:50.431Z
        - commits:
            - subject: "efitools: Add recipe"
              hash: 64daca47ee173b94ffc40ed042a19c114a4e371d
              body: |
                From

                https://github.com/jiazhang0/meta-secure-core at:
                3fa3fc6dcb41fb6392de84154445502d0668153c
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "sbsigntool: Add recipe"
              hash: 32a22fa740bd06cbb399998f7d8fd12c2088de7c
              body: |
                Required by efitools.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.87.17
          date: 2021-11-21T17:23:50.379Z
        - commits:
            - subject: "peak: Modify kernel driver to use signing class"
              hash: 12cbccc2a880bf3f9782b61c4afe4bd393a9414b
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.87.16
          date: 2021-11-21T10:54:01.163Z
        - commits:
            - subject: "kernel-balena.class: Add support for FDE and sign for secure boot"
              hash: fa67eb58b88155bf4808181ff6429fd94704cad3
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.15
          date: 2021-11-21T08:53:19.604Z
        - commits:
            - subject: "sign-efi.bbclass: do not mix old and new bitbake syntax"
              hash: fb8d7ed997f3cdc08d3a7d3b65e1ebd4aba6d90e
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: 'Revert "sign-efi.class, sign-kmod.class: Replace original files with
                signed ones"'
              hash: fe553becac56b973e0adc9adeb71655fa7d9883d
              body: >
                This reverts commit 853656e6bcfed0b0206d031c32cd1cde811b8146.


                The change overwrites build files, though that is what we need, it is a hacky

                approach and we will look for a clean solution.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.14
          date: 2021-11-21T07:00:01.356Z
        - commits:
            - subject: "meta-resin-sumo/pyro: Fix initramfs-framework kexec dependencies"
              hash: 9d2d1df166a80f693cfee8a34ffd6e1f5b7ff581
              body: >
                On recent Yocto versions the findmnt package is split into its
                own

                package, but sumo needs to include the whole util-linux package.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "initrdscripts: Use a 2nd stage bootloader to unlock LUKS partitions"
              hash: acbc384d527436e5d7382504dcf62f799b9490d5
              body: >
                GRUB can not use the TPM easily to unlock the volumes and find
                the kernel

                on an encrypted partition. Instead, we choose to store a linux kernel

                and use it as 2nd stage bootloader to unlock the partition, load the actual

                kernel and kexec into it. This should eventually be replaced by a proper

                2nd stage bootloader that is being worked on.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "grub-efi: add support for signature verification in secure boot mode"
              hash: ac22f29ffa370f48704fcfb6c7cdb8eec200ba18
              body: |
                This incorporates multiple changes:
                - Patch grub to propagate secure boot mode to the kernel
                - Enable GPG signature verification in GRUB
                - Sign GRUB config files
                - Sign the grub EFI binary for secure boot
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.13
          date: 2021-11-20T22:06:37.895Z
        - commits:
            - subject: "initramfs-module-cryptsetup: add TPM dependencies"
              hash: dfff22ad0315c9893d9def6829708b50153d691d
              body: >
                The TPM2 utilities were always pulled into the image during
                development

                but for the final version they are not and this should pull them

                as dependencies.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.12
          date: 2021-11-20T15:38:45.684Z
        - commits:
            - subject: "balena-keys: Add recipe"
              hash: 1436ac7e3cac2bd244fd387c80a8e52de7f68b5a
              body: >
                Add a recipe to deploy the signing keys to the deploy directory.

                Device types that use them should copy them into the boot partition.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.87.11
          date: 2021-11-20T12:30:28.072Z
        - commits:
            - subject: "sign-efi.class, sign-kmod.class: Replace original files with signed
                ones"
              hash: 853656e6bcfed0b0206d031c32cd1cde811b8146
              body: >
                Currently the two classes would keep the original files
                untouched and store

                the signed versions as .signed. This patch reverses the logic - the signed

                files replace the original ones and the unsigned version is stored as .unsigned.

                This is because there is no real use-case for the unsigned files, we always

                want to ship the signed version, even if the particular DT does not require it,

                this causes no harm.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: Add signing classes
              hash: 5c128e6b234d75ba684212a322ababa7b5bd13d2
              body: >
                Add classes for GPG, KMOD and EFI artifact signing. Inheriting
                these classes

                won't run the signing tasks, they have to be manually added to recipes.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.87.10
          date: 2021-11-20T07:33:31.830Z
        - commits:
            - subject: "hostapp-update-hooks: Add a hook that aborts HUP to unsigned OS under
                secure boot"
              hash: 9db5d09428bdba067974ff5c5c62a8d35eab7a67
              body: >
                When a device is running in secure boot mode, it must not be
                possible to HUP

                to an unsigned version of the OS because UEFI would refuse to boot it before

                any of our self-recovering rollback mechanisms can be triggered. This would

                effectively brick the device, needing physical access to recover.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.9
          date: 2021-11-17T03:10:29.925Z
        - commits:
            - subject: "resin-mounts: mount EFI partition if it is split from boot"
              hash: 1cf47718063093369e26ac8831dc83db904de214
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.8
          date: 2021-11-17T03:04:09.427Z
        - commits:
            - subject: "initrdscripts: add a script for unlocking LUKS volumes"
              hash: 7b095c49d49a2ed08c827a872813db270830a503
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.7
          date: 2021-11-16T12:31:32.268Z
        - commits:
            - subject: "connectivity: proxy: move nadoo/glider to container"
              hash: 07dbe414a1dfa556427d4fc94ce7fdec688cf0e2
              body: >
                Previously, the core service exposed a /proxy endpoint that
                would start

                up a proxy remotely, which would be used by a test in the connectivity

                module. However, the endpoint returned the address for the testbot to be

                used as the proxy in the response, and this required manual

                configuration of the interface. Additionally, it requires the worker

                service to install and provide glider for forward proxying.


                Move the proxy (glider) to a container on the device being tested,

                which simplifies configuration, and reduces the complexity and size of

                the interface of Leviathan.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.87.6
          date: 2021-11-15T13:04:05.810Z
        - commits:
            - subject: "tests: os: Add exposed engine socket test"
              hash: 612b7853a23441d0192de5580d37d0f89f7f3103
              body: >
                This tests the engine socket being exposed in development mode
                but not

                in production mode.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.87.5
          date: 2021-11-11T17:56:18.921Z
        - commits:
            - subject: "resindataexpander: also resize LUKS volume if necessary"
              hash: aff55ab61db7842202d7aec2e16b3bab505daf60
              body: |
                The behaviour for non-LUKS system should be the same as before,
                an extra step is performed when LUKS resize is necessary.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.4
          date: 2021-11-11T14:56:27.092Z
        - commits:
            - subject: Add out-of-tree peak CAN driver
              hash: 983c233bbc243f83c53706639867485655cafbfb
              body: |
                Only add the recipe, let DTs pull it as necessary
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.3
          date: 2021-11-11T12:59:58.982Z
        - commits:
            - subject: Add recipes for TPM2 tools
              hash: baddbd39fd17d364ebfd69bf139980ca82abc8ba
              body: >
                Taken from
                http://git.yoctoproject.org/cgit/cgit.cgi/meta-security/tree/meta-tpm/recipes-tpm2

                Only add the recipes, let DTs pull it as necessary.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: meta-balena-2.87.2
          date: 2021-11-11T08:07:31.669Z
        - commits:
            - subject: "recipes-devtools/dosfstools: Fix build with Poky Honister"
              hash: 4c47a01aab59afefbb9ad055fbb975c45f5dd262
              body: |
                Poky Honister comes with dosfstools v4.2
                so we cannot use the v4.1 append in the
                meta-balena-common layer.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.87.1
          date: 2021-11-10T17:07:04.950Z
        - commits:
            - subject: "meta-balena-common/conf: Switch layer to Honister compatibility"
              hash: 8cc0c59efc9946b74fea6fb3a7d6b0d51bad015b
              body: ""
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.87.0
          date: 2021-11-09T09:42:26.620Z
        - commits:
            - subject: "patch: Fix URL to yocto project dependencies"
              hash: 916b1d256a0ab3f23818e7307ce219cdaed2002f
              body: ""
              footer:
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.86.3
          date: 2021-11-09T00:07:14.996Z
        - commits:
            - subject: "dosfstools: selectively apply upstreamed patch"
              hash: 8f04f1142bcb3074d86e2827dfda6c7d8c87fefd
              body: >
                This patch was submitted and accepted upstream, and is present
                since

                v4.2.


                https://github.com/dosfstools/dosfstools/commit/87a8f29785bb605350821f1638a42e6cf3e49ce3


                This fixes a build error applying a patch that's already been applied

                when building newer versions of dosfstools.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: "tests: wait for the chronyd service become active"
              hash: c49648a0f27f1a57376803ba9c85ec9ba729ebe9
              body: >
                Add a test to wait for the chronyd service to become active
                before

                starting the time sync tests.


                The current chronyd tests assume that the chronyd service is

                instantly available at boot time. With the addition of the new

                HTTPS time synchronisation service the starting of chronyd can be

                delayed by a few seconds so we need to ensure that the service

                is actually running before proceeding.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "tests: wait for the chronyd service become active"
                changelog-entry: "tests: wait for the chronyd service become active"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.86.2
          date: 2021-11-08T15:41:30.313Z
        - commits:
            - subject: "tests/issue: Add test to check issues files"
              hash: 472bf8a99a111e061e416557e9ab0f538041ae01
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "base files: Use HOSTOS_VERSION in issue and issue.net"
              hash: fb9fd5c0a848c93b020a81521fa6e0cc0f3dd0bb
              body: |
                This allows to display ESR releases on the welcome login.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.86.1
          date: 2021-11-02T12:36:12.690Z
        - commits:
            - subject: Create new data partition reset service
              hash: 60f7dd78b93c3a079aac346d5f587198e541a1a8
              body: |
                Similar to state-reset, the data partition will be mostly
                purged if the remove_me_to_reset file is removed.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.86.0
          date: 2021-10-29T12:26:28.613Z
        - commits:
            - subject: restrict dtoverlay test to rpi devices
              hash: 98d8f80b6e2c49fabecad70f539a3e247ac20895
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.85.17
          date: 2021-10-28T13:26:21.042Z
        - commits:
            - subject: Update balena-engine to v19.03.30
              hash: abf610e022eeac709c054e4fb672b850ef08a940
              body: >
                Fixes EINVAL errors caused by sockets during storage migration,

                https://github.com/balena-os/balena-engine/commit/17a198cb53a53da456c848bf303dc3917ca538c5


                Update balena-engine from 19.03.29 to 19.03.30
              footer:
                Changelog-entry: Update balena-engine to v19.03.30
                changelog-entry: Update balena-engine to v19.03.30
                Change-type: patch
                change-type: patch
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested:
                - commits:
                    - subject: "storagemigration: keep going if migration fails"
                      hash: 2bde63c800b1df72fba7161d62b5b6da84a8d390
                      body: >
                        the only hard error is if rollback (failcleanup) fails,
                        in all other

                        scenarios we want the daemon to continue starting with the new

                        graphdriver
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                    - subject: "graphdriver/copy: fix handling of sockets"
                      hash: 17a198cb53a53da456c848bf303dc3917ca538c5
                      body: >
                        previously switch would treat S_IFIFO and S_IFSOCK as
                        the same, passing

                        both of the to mkfifo, which lead to EINVAL errors when trying to create

                        the socket, we instead handle socket separately.


                        Also adds cases for this to the unit and integration tests of the

                        migrator.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.30
                  date: 2021-10-26T13:43:43.638Z
          version: meta-balena-2.85.16
          date: 2021-10-27T10:26:55.185Z
        - commits:
            - subject: "linux-firmware: Include RTL8723BU firmware files"
              hash: 2490287e51d96f3ceabd7e3d7a9cd93f49442ba7
              body: >
                The driver for RTL8723BU wireless chipset is present, but its
                firmware

                files are not loaded. This patch includes them.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Zahari Petkov <zahari@balena.io>
                signed-off-by: Zahari Petkov <zahari@balena.io>
              author: Zahari Petkov
              nested: []
          version: meta-balena-2.85.15
          date: 2021-10-26T15:34:07.511Z
        - commits:
            - subject: "balena-supervisor: Update balena-supervisor to v12.11.0"
              hash: 983eba7a9e61ba9fdd494807d516f1006a7a3504
              body: |
                Update supervisor to latest version to add API backoff behavior.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Felipe Lalanne <felipe@balena.io>
                signed-off-by: Felipe Lalanne <felipe@balena.io>
              author: Felipe Lalanne
              nested: []
          version: meta-balena-2.85.14
          date: 2021-10-25T15:51:29.429Z
        - commits:
            - subject: "balena-engine: Remove deprecated development drop-in service file"
              hash: 8db04c4e70fc4f30ae6b9e5009d04d8c247d7364
              body: >
                This file is no longer used since the merge of dev and prod
                images.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.85.13
          date: 2021-10-21T13:51:52.714Z
        - commits:
            - subject: make led test work with beaglebone
              hash: e615c008f916fb4542731c3b0c860be0d79a71b2
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.85.12
          date: 2021-10-21T10:59:58.802Z
        - commits:
            - subject: "patch: Add dtoverlay practical test"
              hash: 76664fceb33d01cf504df464879569f8c147f2fd
              body: ""
              footer:
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.85.11
          date: 2021-10-06T07:35:19.121Z
        - commits:
            - subject: "image-balena: Decouple boot directory generation from rootfs task"
              hash: 0a2a6bc11a0868c6cd858f28783eccfee5199ca9
              body: >
                The boot partition needs to be generated before creating the
                balenaos-img

                but is not part of the root filesystem generation.


                The decoupling allows to build just the docker rootfs image without

                having to build the balenaos-img target.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.10
          date: 2021-10-04T11:39:33.460Z
        - commits:
            - subject: "classes/resin-u-boot: Increase OS_BOOTCOUNT_LIMIT to 3"
              hash: 2756f4e2621f6f24ed8e0add675049bf3515383f
              body: |
                Let's increase the current value for the rollback-altboot
                bootcount to 3, to account for accidental poweroffs triggered
                by users or by power supplys when booting into the new OS,
                during HUP.

                When the limit is reached, u-boot will proceed to try
                to boot into the old OS.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.85.9
          date: 2021-10-01T13:01:16.476Z
        - commits:
            - subject: "hostapp-update-hooks: Blacklist Rock Pi configuration file"
              hash: 5379c4131b23e912dda9eddc0c309301d007414b
              body: |
                The Rock Pi 4B uses a file named hw_intf.conf for
                enabling/disabling interfaces and for loading overlays.
                Just noting that the syntax is also slightly different
                from the config.txt file on RaspberryPi.

                Let's blacklist this file to avoid overriding
                it during an OS update.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.85.8
          date: 2021-09-29T13:49:00.466Z
        - commits:
            - subject: "balena-healthcheck: Remove redundant steps and rely on hello-world"
              hash: 33925aa5132f23e92d3754b4422c22f40d854d42
              body: >
                In situations with limited resources the info and ps commands
                can take

                an unecessarily long time when we really only need to know that a

                container can be started.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.85.7
          date: 2021-09-28T14:01:40.209Z
        - commits:
            - subject: "kernel-balena: Fix kernel config warning for UPROBE_EVENTS"
              hash: 877a846369f8863145546afe4899de8f14148d94
              body: >
                Some BSP kernel configurations do not define FTRACE, so add it
                as a

                dependency.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "kernel-balena: Configure DEBUG_FS"
              hash: 15694f9e9510cd0e2c5cd3514d611761724ef003
              body: >
                The debugging filesystem is usually mounted on user images and
                it is

                enabled by default on most Linux distributions.


                Fixes balena-os/balena-allwinner#128
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.6
          date: 2021-09-27T10:20:36.218Z
        - commits:
            - subject: Run iwlwifi firmware cleanup in fakeroot
              hash: 24b6b9cdc0228c85671a0ba492cfd148a6c547ae
              body: >
                This prevents downstream linux-firmware fakeroot tasks, such as

                firmware compression, from encountering Pseudo Abort due to files

                changing outside the fakeroot context.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.85.5
          date: 2021-09-23T16:39:34.551Z
        - commits:
            - subject: "common: conf: create disable-user-ns distro feature"
              hash: 7dde2133a5b1df710255b8b0471385cca1449c1d
              body: >
                When user namespacing was enabled in the kernel by default, a
                separate

                commit [0] was introduced to disable the feature at runtime, to allow

                users/administrators to explicitly choose to enable it, avoiding

                potential security implications.


                However, some applications such as Chromium's sandbox, require either

                SUID or user namespacing to work. Disabling this feature on boards

                that previously enabled it necessitates container modifications and

                potentially breaks previously working applications.


                Create a distro feature to disable user namespacing by default in

                meta-balena, while allowing device types to keep it enabled to maintain

                compatibility with their original behavior.


                https://github.com/balena-os/meta-balena/commit/31c3ae8ad5c7ad45e450349b6972524da120e96c
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.85.4
          date: 2021-09-21T19:37:48.181Z
        - commits:
            - subject: "balena-os-sysctl: Reduce the console default loglevel"
              hash: 626b0e25cbd13ca65a74bbfe09ff9e0828b380bb
              body: >
                This avoids the kernel printing debug messages on the consoles.
                It is

                also the default in other upstream distros like Ubuntu.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-config-vars: Re-run os-sshkeys if config.json is modified"
              hash: 67b7aa5b58a26178411b598415e296fea5628a00
              body: >
                This change allows to pick-up changes to "os.sshKeys" in
                config.json

                without having to reboot.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "systemd: Use drop-in to modify unit files instead of sed"
              hash: b07a78453243d12db59524836c3cc62d355a6f2d
              body: >
                Performing unit modifications in drop-in files is better
                practise.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.3
          date: 2021-09-21T11:28:51.115Z
  version: 2.88.4
  date: 2022-01-15T16:30:58.980Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.1
      hash: 1a08f2e538d069650698096c24351824af4b070f
      body: |
        Update balena-yocto-scripts from v1.16.0 to v1.16.1
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.1
        changelog-entry: Update balena-yocto-scripts to v1.16.1
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "revert_overrides: Add intel-quark to architecture overrides"
              hash: cbcbbc42c10700c77e17d8f9224e35bec90280fe
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.1
          date: 2022-01-11T14:37:00.027Z
  version: 2.85.2+rev7
  date: 2022-01-12T18:23:30.360Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.0
      hash: 53109f3046bfce040fdeade6ed37dea31b14f701
      body: |
        Update balena-yocto-scripts from v1.15.8 to v1.16.0
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.0
        changelog-entry: Update balena-yocto-scripts to v1.16.0
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: "balena-deploy: Check for file existence before deploying"
              hash: 36494bf99a08b68a5afac5038d4691a583d01500
              body: >
                When discontinuing a device type, there are no artifacts apart
                from

                device-type.json, so check that the logo is there before deploying.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Check existence of tag before re-deploying"
              hash: c1a5b20b0ef0d04a30b6bf0bcfacf0a527e931ae
              body: >
                If a release is already tagged with this version, issue a
                warning and

                bail out.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Add function to check the existence of a release tag"
              hash: bdc2146c3ad719f5c7335aeb7b4ee43775a20ac7
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Finalize releases when deployed"
              hash: 1e3768132d87295998bd9a17d0f01121e161e312
              body: >
                For now and until a proper CI/CD workflow is in place, finalize
                releases

                on deployment.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Accept deployments without balena.yml
              hash: 23c1f91993f37a18ade26ceef621e24409be5f74
              body: >
                If no balena.yml file exists, the deployment will go through
                without

                setting a release semver.


                For the time being we are still using a version label in the hostapp.


                This commit will be reverted once we get rid of the version label.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Accept deployments without balena.yml
                changelog-entry: Accept deployments without balena.yml
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_generate_ami: Remove variant from image name"
              hash: 0fe3d6c8d0ebff85248f0bed99750186f05ab686
              body: |
                The OS is now a unified image so there are no variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-build.sh: Stop building OS variants"
              hash: 4e65c83e7808e91c99e335609142401e0031ed23
              body: |
                The OS is now a unified image so there are no variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build.sh: Remove buildFlavor"
              hash: b66f7ce58f0c12f78941ed34eb311bbd3a96af1c
              body: |
                The OS is now a unified image so there are no build flavours.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-blocks: Remove variant build option"
              hash: e7fb9fc8354445bcbc05687e1f96aa0e8025ecc9
              body: |
                The OS is now a unified image without variants.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Stop using .dev/.prod variant suffixes"
              hash: 65c030b986f62b0faaddba501520662a8ac2777d
              body: >
                The OS has now a unified image that can be configured to be
                development

                or production mode.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Stop tagging hostapp releases with variant"
              hash: 3fc5efeeef4ae74e499504c1148932539a49c28e
              body: >
                The API will stop using the variant tag but will still use the
                version

                tag.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-lib: Use externalVersion to match contracts"
              hash: 385c5bacfc1452e4b065de55bfdf71727b303fff
              body: >
                The version refers to the actual contract, while the
                externalVersion is

                the one that refers to the balenaOS revision.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build: Deploy hostapp like any other block"
              hash: bfe7f51dc75f335d38fa4dbf824fa887be8d82ee
              body: |
                Use common functions for block deployments
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-blocks: Separate block build release deployment"
              hash: 70fe00969921bbf6894cc86ecb343eb342c6f2ca
              body: >
                Separating the build and release of blocks allows to use common
                code for

                block release.


                Also, pass a flag to specify whether the block should be deployed as final

                release.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy-block: Use release versioning"
              hash: d1c74d0261f17ebcad9825bc7e0df22142da14a3
              body: >
                Deploy as draft releases by default. Final releases will be
                flagged

                once validation passes.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build: Remove discontinued check"
              hash: 55774ee27f938bbcbb238aa6441680b3d39172c3
              body: >
                Individual deploy functions now bail out for discontinued device
                types,

                there is no need to check for it here.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Do not deploy discontinued device types"
              hash: f54251e61c466018072e04c344595b3eba70bf57
              body: >
                Check for discontinued device types before deploying to
                dockerhub or

                to balenaCloud.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Discontinued device types use meta-balena version"
              hash: bbecd72c64bf8ff1277a10c03cb39fbf99748e05
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-deploy: Adapt balena_deploy_block to release versioning and use
                it"
              hash: cfc0bc43af1fb60ff3ddd56f08ae781edaa90b68
              body: >
                * Convert balena_deploy_build_block to balena_build_block, and
                deploy
                  with balena_deploy_block
                * Remove balena_deploy_hostapp and replace with balena_deploy_block

                * Modify balena_deploy_hostos to use balena_deploy_block

                * Modify balena_deploy_block to use release versioning


                By deafult image deployments happen as draft versions, and only become

                final when passing validation.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-build-block: Remove image release"
              hash: 443269afbe867cb5c464ca5dd91bf27aa51427bd
              body: >
                Deal with the release separately so we can use common code for
                it.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Use release revision for fetchers"
              hash: f501ac55e327af0db2142a146423e83f459e0c1f
              body: >
                When fetching images for blocks, use a given release revision.


                Also, add token autentication to the API calls that miss it so that they work

                with private device types.


                Finally, fix indentation.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build-block: Remove release version API setter"
              hash: 8e27328a0caec2acc7651dfe64f8dfc5510e48e0
              body: >
                When using the now deprecated release_version field, the API
                would

                reject deployments for an existing release.


                On the new versioning model, deployments increment a revision field so

                there is no need to check for uniqueness.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Remove release version API setter"
              hash: 42486a59654047cf42f19bd999ef0bcd0a279ea5
              body: >
                This functionality has now been deprecated in the balena API is
                favour

                of draft/final release versioning.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-lib: Use release versioning"
              hash: de2c7af440c1ae4d6f84c5440368f92333500389
              body: >
                BalenaCloud has now a release versioning feature that deprecates
                the

                use of release_version.


                Introduce a new balena_lib_release() function that utilises a balena

                contract and the CLI to set the release version.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.0
          date: 2021-12-30T15:08:43.225Z
        - commits:
            - subject: "balena-deploy: Set leviathan networkWireless mode based on device
                slug"
              hash: 891fadcbabe422e24245beb720cf7326a5ea1136
              body: >
                These changes are currently made in the Jenkins job, so it's
                preferrable

                to have it done by the packaging scripts.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.15.10
          date: 2021-12-02T21:08:09.863Z
        - commits:
            - subject: Substitute the worker types for generic device slugs
              hash: 7539caf732975a5b114abc371a5f6df211d12812
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.15.9
          date: 2021-11-26T19:20:31.029Z
  version: 2.85.2+rev6
  date: 2022-01-03T11:24:13.833Z
- commits:
    - subject: Fix bluetooth firmware loading
      hash: f2ec405715e7ad12aaba14c6c00d38de7a8b3c41
      body: |
        There are cases when the rootfs is read-only. In such cases,
        the approach of updating the systemd service responsible for
        loading the bluetooth firmware will not work.

        Instead we rework it and use an udev rule and systemd service
        combination to load the bluetooth firmware.

        Also, we change the logic of getting the /dev node because
        the current device tree does not define a node named "bt_uart"
        and instead we grep for "wireless-bluetooth".
      footer:
        Changelog-entry: Fix bluetooth firmware loading
        changelog-entry: Fix bluetooth firmware loading
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.85.2+rev5
  date: 2021-12-09T14:02:51.973Z
- commits:
    - subject: Turn i2c7 bus on by default
      hash: dd5260d36b9618dcc7bb94980e59d87ea75091e9
      body: >
        load i2c7 bus by default as this is the main i2c bus on the 40 pin head,
        physical pins 3 and 5
      footer:
        Closes: "#26"
        closes: "#26"
        Change-type: patch
        change-type: patch
        Changelog-entry: Turn i2c7 bus on by default
        changelog-entry: Turn i2c7 bus on by default
        Signed-off-by: Aaron Shaw <shawaj@gmail.com>
        signed-off-by: Aaron Shaw <shawaj@gmail.com>
      author: Aaron Shaw
      nested: []
  version: 2.85.2+rev4
  date: 2021-11-22T22:52:20.601Z
- commits:
    - subject: "balena-image: Install overlays in correct directory"
      hash: 7783822ffb7bdb8bbb7ce937e5ca9667938fad05
      body: |
        The are currently incorectly installed
        in the boot partition, instead of the overlays
        directory. Let's fix that.
      footer:
        Changelog-entry: "balena-image: Install overlays in correct directory"
        changelog-entry: "balena-image: Install overlays in correct directory"
        Signed-off-by: Alexandru Costache <alexandru@balena.io>
        signed-off-by: Alexandru Costache <alexandru@balena.io>
      author: Alexandru Costache
      nested: []
  version: 2.85.2+rev3
  date: 2021-11-17T16:13:36.171Z
- commits:
    - subject: Backport u-boot fat fs related patch in order to fix write failure when
        saving bootcount
      hash: 59df2b1eff5a491c09df606261f2dd14e1817d8b
      body: |
        We backport an u-boot patch in order to fix the following:
        writing bootcount.env
        Error Invalid FAT entry 0x3ffffffa
        Invalid FAT entry
        Error Invalid FAT entry 0x3ffffffa
      footer:
        Changelog-entry: Backport u-boot fat fs related patch in order to fix write
          failure when saving bootcount
        changelog-entry: Backport u-boot fat fs related patch in order to fix write
          failure when saving bootcount
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.85.2+rev2
  date: 2021-11-10T18:35:09.211Z
- commits:
    - subject: Update meta-balena from v2.83.10 to v2.85.2
      hash: d7e6adda34c40c26a688010af3787b47522ecb86
      body: |
        Update meta-balena from 2.83.10 to 2.85.2
      footer:
        Changelog-entry: Update meta-balena from v2.83.10 to v2.85.2
        changelog-entry: Update meta-balena from v2.83.10 to v2.85.2
        Signed-off-by: Alexandru Costache <alexandru@balena.io>
        signed-off-by: Alexandru Costache <alexandru@balena.io>
      author: Alexandru Costache
      nested:
        - commits:
            - subject: Update balena-engine to v19.03.29
              hash: a2ed32e139489afd89e59e0e63a7c676969de3d8
              body: |
                Update balena-engine from 19.03.26 to 19.03.29
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-engine to v19.03.29
                changelog-entry: Update balena-engine to v19.03.29
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested:
                - commits:
                    - subject: "pkg/storagemigration: use graphdriver/copy.DirCopy"
                      hash: ffbb608492405488bff5e31ea62c0249fb416106
                      body: |
                        instead of our own implementation
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.29
                  date: 2021-09-14T15:38:47.823Z
                - commits:
                    - subject: Prune Jenkinsfile
                      hash: ea14e503181bbb248a4bed1b86a227d9c214cbfb
                      body: >
                        we are not using it for our CI, and it confuses jenkins
                        set up on the

                        balena-os org
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.28
                  date: 2021-09-14T14:54:48.288Z
                - commits:
                    - subject: Backport platform-detection fixes from containerd
                      hash: 9f71253561b1cd2f262ec0d6e81c5fbd09a7a0a1
                      body: >
                        See https://github.com/containerd/containerd/pull/4530

                        and `git log ad25c1a9c34361e4071f508b9a91946b05fce165^..2055e12953bb538228d8d9fe627fa545d7cf82be ./platforms/`

                        in the containerd repo
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.27
                  date: 2021-09-01T18:43:57.993Z
          version: meta-balena-2.85.2
          date: 2021-09-17T20:43:01.200Z
        - commits:
            - subject: Fix typo in OS_DEVELOPMENT distro feature
              hash: 7992a7900506eaf0279f93c747dea1520875c817
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: "tests: Remove OS variants"
              hash: 5545c4e15831e16497a737307da69d38f947aa51
              body: >
                The OS is now a single image that can switch between development
                and

                production modes at runtime.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.1
          date: 2021-09-17T14:02:11.331Z
        - commits:
            - subject: Replace image variants with development mode
              hash: 0c7c629dcde13de9188f05f6f551f34837ad84ff
              body: >
                The dual image variants are replaced with a runtime
                configuration switch

                for development mode.


                Fixes #2226

                Fixes #1058

                Relates to: balena-io/balena-io#2247
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: Replace image variants with development mode
                changelog-entry: Replace image variants with development mode
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-supervisor: Update balena-supervisor to v12.10.10"
              hash: 1aa662a4ab11f32c71d13352eea7e86c0784df33
              body: |
                Update balena-supervisor from 12.10.3 to 12.10.10
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested:
                - commits:
                    - subject: "api-keys: Remove os variant parameter for authentication check"
                      hash: 9e0cbe04c6d1c533c3e66183eca1d3abfb8c381d
                      body: >
                        The current code authenticates unmanaged production
                        devices which makes

                        no sense. Unmanaged devices do not need to authenticate with the API.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                    - subject: "os-release: Use developmentMode to ascertain OS variant in new
                        releases"
                      hash: 1abd10a12947f05ae328496e98fcbcdc6a834ce1
                      body: >
                        Newer BalenaOS releases have replaced OS variants for a
                        developmentMode

                        configuration setting. This commit uses this variable to set the OS

                        variant in the absence of `VARIANT_ID` from the os-release file.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                    - subject: "config: Add developmentMode to schema"
                      hash: 4ad7a3ae917c888f267463fd3d5b839439cf40e6
                      body: >
                        Add a `developmentMode` configuration variable to the
                        schema. Do not expose

                        this on the device target state until local key-based authentication is

                        sorted.
                      footer:
                        Relates-to: https://jel.ly.fish/e9525e9e-aa74-478c-b931-52951c679f78
                        relates-to: https://jel.ly.fish/e9525e9e-aa74-478c-b931-52951c679f78
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                  version: balena-supervisor-12.10.10
                  date: 2021-09-07T13:47:51.206Z
                - commits:
                    - subject: Update URL to balena-proxy-config source code
                      hash: 2bcc3aeb56cce11b21d411ee55492109ebaf259f
                      body: >
                        Use a GitHub permalink that includes the commit in

                        case the file changes and the reference becomes out-of-date.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                  version: balena-supervisor-12.10.9
                  date: 2021-09-02T12:25:21.696Z
                - commits:
                    - subject: Bump path-parse from 1.0.6 to 1.0.7
                      hash: 2e38356bf4f5157483017ea2e6670514cbca49c1
                      body: >
                        Bumps
                        [path-parse](https://github.com/jbgutierrez/path-parse)
                        from 1.0.6 to 1.0.7.

                        - [Release notes](https://github.com/jbgutierrez/path-parse/releases)

                        - [Commits](https://github.com/jbgutierrez/path-parse/commits/v1.0.7)


                        ---

                        updated-dependencies:

                        - dependency-name: path-parse
                          dependency-type: indirect
                        ...
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: dependabot[bot] <support@github.com>
                        signed-off-by: dependabot[bot] <support@github.com>
                      author: dependabot[bot]
                      nested: []
                  version: balena-supervisor-12.10.8
                  date: 2021-09-01T20:50:51.601Z
                - commits:
                    - subject: Bump tar from 4.4.13 to 4.4.19
                      hash: b7cb494602fbd050bb9e31b5e8293a080349562c
                      body: >
                        Bumps [tar](https://github.com/npm/node-tar) from 4.4.13
                        to 4.4.19.

                        - [Release notes](https://github.com/npm/node-tar/releases)

                        - [Changelog](https://github.com/npm/node-tar/blob/main/CHANGELOG.md)

                        - [Commits](https://github.com/npm/node-tar/compare/v4.4.13...v4.4.19)


                        ---

                        updated-dependencies:

                        - dependency-name: tar
                          dependency-type: indirect
                        ...
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: dependabot[bot] <support@github.com>
                        signed-off-by: dependabot[bot] <support@github.com>
                      author: dependabot[bot]
                      nested: []
                  version: balena-supervisor-12.10.7
                  date: 2021-09-01T20:40:01.473Z
                - commits:
                    - subject: Remove "variable list" heading in configuration doc
                      hash: 5205e8ce07375a7bf9ca18f0a28bd73c275acd96
                      body: ""
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.6
                  date: 2021-09-01T18:06:51.646Z
                - commits:
                    - subject: Clean up configurations.md
                      hash: af51ef8eb54af96cf00657576908f020ac401488
                      body: ""
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.5
                  date: 2021-08-31T22:51:45.166Z
                - commits:
                    - subject: Include issues with downgrading versions in README
                      hash: 1280ac365618eb4106e9c20dd4e738a22958d0b7
                      body: ""
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.4
                  date: 2021-08-31T18:51:02.478Z
            - subject: "u-boot: Introduce a compile time osdev-image feature"
              hash: b839f2d91ca1844d96f4d3165ae5e2923489d11d
              body: >
                At runtime we can now enable development features that were
                previously

                configured using the development-image feature. That feature also

                configured U-Boot for OS development.


                Now we have two distinct functionalities:


                * A runtime development configuration variable that configures the

                device to facilitate application development

                * A build time osdev-image feature that configures the OS for BSP and OS

                development


                This allows us to merge the current production/development images into

                a single image.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "os-release: Remove image variants information"
              hash: 4c4dac7e0cc078a9d10c0bb77e4bf702af5f0e55
              body: |
                There are no more image variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Replace DEVELOPMENT_IMAGE and image variants with OS_DEVELOPMENT
              hash: fc369799cdab0012cc9c75aaa4a2e54bb6b2656a
              body: >
                The images now can be configured for application development
                mode at runtime.

                This commit introduces a built time option to configure them for BSP or

                other OS development like board bringup.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "images: Remove debug-tweaks settings."
              hash: cb1618b6d17a6c1118ea65d7485bb1bea907e18e
              body: >
                The ssh development configurations are now applied at runtime.
                The only

                feature that has been left out is the postinst logging. Customers that

                need to develop the OS can configure this themselves.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "openssh: Enable runtime development configuration"
              hash: 8bac93b3ed8c54452ea858ffc33a2e46a2e3358d
              body: >
                When a device is configured in development mode, allow password

                authentication and empty passwords, as well as root logins.


                In production mode, disable password authentication to allow only

                SSH access.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-info: Rename from resin-info"
              hash: 7f2abbf9a26c376125d18bd625f639f26d578d12
              body: |
                Replace references to resin for balena.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena: Expose engine socket on development mode"
              hash: 858f3b983e7842a155f0a34d60b6a8f488bacb2e
              body: >
                When configured in development mode expose the engine socket.
                This is

                currently used for local mode development.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "image-balena: Allow passwordless root logins"
              hash: 71aeea3652bf095544b1083023aa5d4e97448597
              body: >
                Even without debug-tweaks, allow passwordless root logins. For
                production

                builds there is no console available so this setting does not change current

                functionality.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'image_balena: Remove "balena" hostname from development images'
              hash: 7b57e9caf4fa82bd05091becfe1b750bca033342
              body: >
                There is no reason not to have development images use the uuid
                as

                hostname in the same way production images do.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "systemd: Runtime enablement of serial console"
              hash: d80092c6ecf67720175b72ccbcbf7da6c907d48f
              body: >
                Adapt the systemd getty services to enable for images configured
                for

                development.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "development-features: Add service for development features runtime
                management"
              hash: 5227ba18d0fe81fabae2b33b3f0cd9f690f85973
              body: >
                This service will adjust the filesystem with development
                features based on

                the `developmentMode` setting on `config.json`.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.0
          date: 2021-09-15T09:05:37.493Z
        - commits:
            - subject: "hostapp-update-hooks: Fix blacklisted extlinux.conf file path"
              hash: 096024808224aea2100e2a2a1f95ef75e23493ef
              body: >
                The extlinux.conf file path in meta-balena is currently

                incorrect, let's update it's boot partition path so that

                BalenaHUP won't need to transfer the isolcpus setting to

                the new OS anymore. This is necessary only when updating from older

                OS versions in which the supervisor adds the isolcpus

                setting to the boot partition extlinux.conf file.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.84.7
          date: 2021-09-13T12:01:41.123Z
        - commits:
            - subject: "balena-persistent-logs: add comment and update logging"
              hash: c05ff73df2341ceb182f7bc1acf00d4719a13afd
              body: |
                Add a comment and update the logging.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "balena-persistent-logs: add comment and update logging"
                changelog-entry: "balena-persistent-logs: add comment and update logging"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: "meta-balena: rename resin-persistent-logs"
              hash: 2fa5bead70a700eff06ea8d140974ea3925a0c7d
              body: |
                Rename 'resin-persistent-logs' to 'balena-persistent-logs' and
                update all references.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "meta-balena: rename resin-persistent-logs"
                changelog-entry: "meta-balena: rename resin-persistent-logs"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.84.6
          date: 2021-09-11T12:14:21.164Z
        - commits:
            - subject: "tests: led: require led property from device type"
              hash: 0439de2a706cabf2b6b82736fa2959313c653c56
              body: >
                Only run LED test when device type contract specifies support
                for it
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.84.5
          date: 2021-09-10T13:29:21.135Z
        - commits:
            - subject: "tests: Remove reboots from redsocks test cases"
              hash: 53f58ca927075730d9bb9ebe0a98e525f3d8d793
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.84.4
          date: 2021-09-09T20:26:17.261Z
        - commits:
            - subject: "tests: Prevent failure when journalctl has no logs for some boots"
              hash: cab2b5aa7b97afad9006ed3c3701e49a9d76d366
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.84.3
          date: 2021-09-09T11:41:46.786Z
        - commits:
            - subject: "contributing-device-support.md: Updates to board support instructions"
              hash: 56d47e97ab2becea9d7ecd96de397d937f539954
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.84.2
          date: 2021-09-08T13:26:00.933Z
        - commits:
            - subject: "tests: s/BALENA_MACHINE_NAME/BALENA_ARCH"
              hash: 16015b5ba1570777478a585aaea37ed354dacc82
              body: >
                Replace Dockerfile image %%BALENA_MACHINE_NAME%% var with

                %%BALENA_ARCH%% for better compatibility


                Device types lacking matching tags in the balenalib Docker Hub account

                will fail tests when a matching image is not found. Switch to

                BALENA_ARCH instead, to maintain compatibility.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.84.1
          date: 2021-09-05T16:47:16.988Z
        - commits:
            - subject: "balena-engine: Enable storage migration"
              hash: 7d69faa7889e6725a4397511a6178ed2c745acbd
              body: ""
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
            - subject: Update balena-engine to v19.03.26
              hash: a7538159d2015a61dc3effc5e3fe390056d0265b
              body: |
                Update balena-engine from 19.03.24 to 19.03.26
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-engine to v19.03.26
                changelog-entry: Update balena-engine to v19.03.26
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested:
                - commits:
                    - subject: "storagemigration: capture failcleanup logs in logfile"
                      hash: 4f7f543eff08766bc584024afdb57760dfb52130
                      body: >
                        reorder the defer statements in the migrate function to
                        only teardown

                        the logger after the failcleanup function ran. otherwise errors logged

                        there won't show up in the logfile
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.26
                  date: 2021-08-31T11:26:15.276Z
                - commits:
                    - subject: "storagemigration: move logic to package"
                      hash: 001835bf61172fdcfdb0416e000852ff05683c71
                      body: >
                        This brings all migration logic into a single call into
                        the

                        storagemigration package, which should make future maintenance easier

                        and fixes the cleanup logic bug, where the old aufs root would never be

                        cleaned up.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.25
                  date: 2021-08-20T15:55:35.623Z
          version: meta-balena-2.84.0
          date: 2021-09-03T11:43:21.582Z
        - commits:
            - subject: "tests: remove healthcheck test race condition"
              hash: 4f728271e767e8998f73870c2de23c03a5d12823
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.83.22
          date: 2021-09-02T15:34:27.322Z
        - commits:
            - subject: "tests: Register teardown only when DUT is reachable"
              hash: 2f01b040236f6565195550cdfde91464687f5cf2
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.83.21
          date: 2021-09-01T22:56:06.844Z
        - commits:
            - subject: "tests: Use new Archiver implementation & helpers"
              hash: 883ec60492a16b443cb6ce04c12cda8bbf4d028d
              body: |
                The changes are as follows:
                1. Delete custom logic in tests for archiving logs
                2. Make use of the new archiveLogs helper
                3. Make use of the new implementation of the Archiver module
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.83.20
          date: 2021-09-01T19:37:21.036Z
        - commits:
            - subject: "tests: List boots when collecting journal logs in hup suite"
              hash: 8e7b6a157b033db57ff2df75a63b5e054957803f
              body: |
                Some OS versions before HUP do not support the '-b all' flag
                to journalctl. This commit reverts to the original behaviour
                that lists the boots and requests the logs for each boot.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.19
          date: 2021-09-01T13:25:10.726Z
        - commits:
            - subject: "balena-supervisor: Update balena-supervisor to v12.10.3"
              hash: 782c9e24b91b5beb1c30c7643015c6fe7f53d2d2
              body: |
                Update balena-supervisor from 12.9.3 to 12.10.3
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested:
                - commits:
                    - subject: Skip restarting services if they are part of conf targets
                      hash: 669866b4c296529bd5392a0c48cd389a6d1f5770
                      body: >
                        Some recent changes to the OS allowed some services to
                        restart

                        automatically when the associated config files are changed.


                        In these cases we want to avoid restarting the same services

                        manually from the supervisor.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                  version: balena-supervisor-12.10.3
                  date: 2021-08-24T18:07:03.099Z
                - commits:
                    - subject: Removed fire emoji prefix for firewall logs.
                      hash: 30c728fae23ee66f3c1612736bb0c300f0b0762d
                      body: ""
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: peakyDicers
                      nested: []
                  version: balena-supervisor-12.10.2
                  date: 2021-08-02T21:27:42.412Z
                - commits:
                    - subject: Fix regression with local mode push
                      hash: 6f5f3bc2f3aea1bf5e5772533be80c3bfbb4e3a9
                      body: >
                        PR #1749 introduced a bug when pushing local target
                        state. An update to

                        the [image name normalization](https://github.com/balena-os/balena-supervisor/blob/f1bd4b8d9bcef29e326cbf97eaddd837c2704d19/src/lib/docker-utils.ts#L81)

                        failed to consider the local image name format. This results in mangling

                        of image names in the database, i.e. the image `ubuntu:latest` is stored

                        as `/ubuntu:latest`. This causes an exception to be returned by the

                        dockerode `getImage('/ubuntu:latest').inspect()` call.


                        This sends the supervisor into a crash loop and is shown on the supervisor

                        journal logs as


                        ```

                        getaddrinfo ENOTFOUND images
                            at GetAddrInfoReqWrap.onlookup [as oncomplete] (dns.js:64:26)
                        ```


                        Unfortunately if this happens on a user device, since the mangled image

                        name is already on the database, the easiest way to fix is to remove the

                        supervisor database and let the supervisor recreate it. Deleting the

                        database should be side effect free.
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.10.1
                  date: 2021-08-02T15:55:28.001Z
                - commits:
                    - subject: Remove comparison based on image, release, and service ids
                      hash: b67f94802dd8c2e890121f6ca82eda8dff2c051c
                      body: >
                        Preparing for the new v3 target state, where the
                        supervisor will make environment

                        dependent ids optional and rely on using general UUIDs and user known identifiers

                        for comparison. This PR moves forward in that direction by removing some of those

                        comparisons for v2 target state.


                        - imageId to be replaced with imageName

                        - serviceId to be replace by serviceName

                        - releaseId to be replaced by commit (future release_uuid)


                        This is a backwards compatible change, meaning it doesn't completely get rid of

                        these identifiers (which are still being used by supervisor API and for state

                        patch), but will not depend on those identifiers for calculating steps to target state.
                      footer:
                        Change-type: minor
                        change-type: minor
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.10.0
                  date: 2021-07-28T14:00:22.581Z
                - commits:
                    - subject: Use tags to track supervised images in docker
                      hash: f1bd4b8d9bcef29e326cbf97eaddd837c2704d19
                      body: >
                        The image manager module now uses tags instead of docker
                        IDs as the main

                        way to identify docker images on the engine. That is, if the target

                        state image has a name `imageName:tag@digest`, the supervisor will always use

                        the given `imageName` and `tag` (which may be empty) to tag the image on

                        the engine after fetching. This PR also adds checkups to ensure

                        consistency is maintained between the database and the engine.


                        Using tags allows to simplify query and removal operations, since now

                        removing the image now means removing tags matching the image name.


                        Before this change the supervisor relied only on information in the

                        supervisor database, and used that to remove images by docker ID. However, the docker

                        id is not a reliable identifier, since images retain the same id between

                        releases or between services in the same release.


                        List of squashed commits

                        - Remove custom type NormalizedImageInfo

                        - Remove dependency on docker-toolbelt

                        - Use tags to traack supervised images in docker

                        - Ensure tag removal occurs in sequence

                        - Only save database image after download confirmed
                      footer:
                        Relates-to: "#1616 #1579"
                        relates-to: "#1616 #1579"
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.6
                  date: 2021-07-26T13:58:29.275Z
                - commits:
                    - subject: Log the delta URL that will be downloaded on update
                      hash: c05c5803f08ddd31eeddb2000cc5f162fb916003
                      body: ""
                      footer:
                        Change-type: patch
                        change-type: patch
                        Closes: "#1755"
                        closes: "#1755"
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.5
                  date: 2021-07-22T15:08:58.505Z
                - commits:
                    - subject: Fix db-helper module for tests
                      hash: 357d1baf6188d89b8552fd9068dbea9ac50aa008
                      body: >
                        The previous module was using `rewire` to get the knex
                        instance from the

                        db module but that was leading to issues when running tests using `test:fast`.

                        This provides a fix for the test module that just removes the destroy

                        call entirely (it turns out it is not necessary).
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.4
                  date: 2021-07-08T18:48:09.003Z
          version: meta-balena-2.83.18
          date: 2021-08-31T20:45:45.918Z
        - commits:
            - subject: Assign a fixed name to the balena-healthcheck container
              hash: c80932d323ae99a3b3a3a9120a29b5c67196fc44
              body: |
                This avoids confusion when new containers with random names
                appear in the runtime history of the engine.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.17
          date: 2021-08-31T16:04:47.503Z
        - commits:
            - subject: "kernel-modules-headers: Copy module.lds"
              hash: 9fca34e0f4faffc0fa049e9341e7392f365bea31
              body: >
                Since kernel v5.10 this file is generated when using
                modules_prepare. As

                the kernel-modules-headers contains pre-built target binaries, we also

                need to include this file in the package.


                This is not a problem when using kernel-source as a modules_prepare is

                always required.
              footer:
                Fixes: "#2289"
                fixes: "#2289"
                Relates-to: "#1822"
                relates-to: "#1822"
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.16
          date: 2021-08-31T11:22:51.142Z
        - commits:
            - subject: "kernel-balena: remove global blacklist of btrfs"
              hash: b9d6df84a1acd45df80da8a90ea4ca4dc2940bcf
              body: >
                The kernel-balena class contains a global blacklist of btrfs
                that

                disables this filesystem for all device types, regardless of them

                explicitly enabling it.


                Remove this config to allow devices to enable this filesystem.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.15
          date: 2021-08-30T15:47:20.658Z
        - commits:
            - subject: "tests: remove reboot requirement from NTP server test"
              hash: 47deb00854eefc2c8ca4103d934713d26077a7c8
              body: |
                We no longer require a reboot when changing the NTP server
                configuration in config.json. Changes to 'config-json' will
                automatically trigger the 'balena-ntp-config' service which will
                update the NTP sources.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "tests: remove reboot requirement from NTP server test"
                changelog-entry: "tests: remove reboot requirement from NTP server test"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: "recipes-connectivity: fix auto-update when config.json changes"
              hash: 85df30628278eeb0d55e731319391d3cf98df9a8
              body: >
                Since adding the 'config-json' systemd target the
                'balena-ntp-config'

                and 'prepare-openvpn' services have stopped running automatically

                when config.json is updated. This is fixed by adding

                'RemainAfterExit=yes' to both service files.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "recipes-connectivity: fix auto-update when config.json
                  changes"
                changelog-entry: "recipes-connectivity: fix auto-update when config.json
                  changes"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.14
          date: 2021-08-26T17:54:07.640Z
        - commits:
            - subject: "networkmanager: fix hostname race condition"
              hash: 3f2486bc91994d360086694df9f01bb4b6777284
              body: >
                Fix a race condition that can occur when setting the hostname at

                boot by disabling NetworkManager's ability to modify the hostname.

                The static and transient system hostnames are now managed exclusively

                by the 'balena-hostname' service.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: "#2244"
                connects-to: "#2244"
                Changelog-entry: "networkmanager: fix hostname race condition"
                changelog-entry: "networkmanager: fix hostname race condition"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.13
          date: 2021-08-26T12:17:00.556Z
        - commits:
            - subject: "tests: remove reboot requirement from hostname test"
              hash: 34687ca76515d57a77ba12c0fd44632518181392
              body: >
                We no longer require reboots when changing hostname in
                config.json.

                The contents of '/etc/hostname' and the avahi mDNS broadcast hostname

                are updated automatically without requiring a reboot.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "tests: remove reboot requirement from hostname test"
                changelog-entry: "tests: remove reboot requirement from hostname test"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: "hostname: update system hostname when config.json changes"
              hash: f7b3d37502f03ca65d3352a8a8cc3b8a5d612ff4
              body: >
                Automatically update the system hostname when config.json
                changes.


                Changes to 'config.json' will trigger the 'balena-hostname' service

                to update the static and transient hostnames and the 'avahi'

                service to ensure that any hostname changes are broadcast via mDNS.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "hostname: update system hostname when config.json changes"
                changelog-entry: "hostname: update system hostname when config.json changes"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.12
          date: 2021-08-25T23:51:01.153Z
        - commits:
            - subject: "linux-firmware: Use wildcards when selecting files to package"
              hash: 16598bcffda7206d9a2ab9d96860cecf7de62756
              body: >
                Firmware files can be compressed with an xz extension or not, so
                use

                wildcards to cover both cases.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "linux-firmware: Add firmware compression support"
              hash: 2ee6d2e652772d28c25df94aa400e7ccd9f207de
              body: >
                This commit adds a FIRMWARE_COMPRESSION distro configuration
                that

                performs the compression of linux-firmware files. Only kernel versions

                above 5.3 support loading compressed firmware.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "kernel-balena: Support firmware compression from kernel version 5.3"
              hash: c8faa130b88f11af86619d69a115be96dfbc894a
              body: >
                Kernel version 5.3 supports loading compressed firmware files
                saving

                storage space.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.11
          date: 2021-08-24T14:52:41.041Z
  version: 2.85.2+rev1
  date: 2021-11-06T18:53:55.020Z
- commits:
    - subject: Update balena-yocto-scripts from v1.14.8 to v1.15.8
      hash: d13dec15539e80f0451507ae2c1cd0437c128d1a
      body: |
        Update balena-yocto-scripts from 1.14.8 to 1.15.8
      footer:
        Changelog-entry: Update balena-yocto-scripts from v1.14.8 to v1.15.8
        changelog-entry: Update balena-yocto-scripts from v1.14.8 to v1.15.8
        Signed-off-by: Alexandru Costache <alexandru@balena.io>
        signed-off-by: Alexandru Costache <alexandru@balena.io>
      author: Alexandru Costache
      nested:
        - commits:
            - subject: "Dockerfile_yocto-build-env: Install Honister host deps"
              hash: efc069c609431965394912d3ffd34362a1108852
              body: >
                See
                http://docs.yoctoproject.org/next/migration-guides/migration-3.4.html#new-host-dependencies
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: balena-yocto-scripts-1.15.8
          date: 2021-11-03T10:01:44.980Z
        - commits:
            - subject: "jenkins_build.sh: Fix deployment for discontinued device types"
              hash: 84e65e937fef38625277fb8330ebd3179c466d04
              body: >
                Do not deploy dockerhub or hostapp images for discontinued
                device types.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build.sh: Remove PRIVATE_DT as it is unused"
              hash: 35fd54620ff5eb487b1323a1ead5fef9c157e385
              body: >
                The private device types status is checked with the API when
                required.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "jenkins_build.sh: Fix lint warnings"
              hash: 068a4197101a2db4aba60793e01564b67d14f820
              body: |
                Fix some minor lint warnings.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.15.7
          date: 2021-10-25T16:57:03.955Z
        - commits:
            - subject: "balena-generate-ami.sh: wait for boot partition when preloading AMI"
              hash: d2ea170a86810a782eeb241e178d4ad72c4939b0
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.6
          date: 2021-10-21T15:04:37.774Z
        - commits:
            - subject: "jenkins_generate_ami.sh: Use a shared directory for preloaded image"
              hash: 9b032f2fddc970db13147b4e637abd1bada1f234
              body: >
                The previous commit moved the preloaded image out of yocto
                cache, which

                made it unreachable from the balena-generate-ami-env container.


                This patch makes mktemp create the file back within yocto cache to ensure

                this is shared yet still each concurrent process can safely have its own copy.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.5
          date: 2021-10-21T04:50:17.146Z
        - commits:
            - subject: "barys: update development image variables"
              hash: 427510332026ca8636dedb6630632a740b481374
              body: |
                Update the DEVELOPMENT_IMAGE references to use OS_DEVELOPMENT
                following the changes to the handling of OS variants.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "barys: update development image variables"
                changelog-entry: "barys: update development image variables"
                Signed-off-by: Mark Corbin mark@balena.io
                signed-off-by: Mark Corbin mark@balena.io
              author: Mark Corbin
              nested: []
          version: balena-yocto-scripts-1.15.4
          date: 2021-10-20T09:40:14.890Z
        - commits:
            - subject: "jenkins_generate_ami.sh: Preload outside of yocto cache"
              hash: fb1763984d76218adc2510da6cb673fbad7197be
              body: >
                Since the file name is hardcoded at this moment, this fails when
                two

                builds are running in parallel (e.g. dev and prod variants during deploy)

                because they try to preload the same file at pretty much the same moment.

                Having a separate copy for each outside of yocto cache should fix the issue.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.3
          date: 2021-10-20T05:12:57.093Z
        - commits:
            - subject: "balena-generate-ami.sh: correctly mount boot partition when injecting
                SSH key"
              hash: c0f6da3e4fe3f9c51ba8b279986a6f4baffe6d96
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.2
          date: 2021-10-01T14:45:58.407Z
        - commits:
            - subject: Update balena-cli to 12.50.1
              hash: 700ebe6d06385440488a42c42179d19434376209
              body: >
                This is necessary for AMI preloading to work, additionally

                it has been more than a year since the last update, we should keep up.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-cli to 12.50.1
                changelog-entry: Update balena-cli to 12.50.1
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.1
          date: 2021-10-01T10:11:14.438Z
        - commits:
            - subject: "jenkins_generate_ami.sh: Use lib function to get arch from
                config.json"
              hash: fffe9ffb363c9eed783a5055e69847c81eb68bcd
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: Look for boot partition by label rather than
                hardcoding p1"
              hash: 45786e701d05811f96d0aeef20481442bb1d0f1c
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: Fail if AMI already exists"
              hash: 9e9a792aed2a659c1ed7327237a61594033b308a
              body: >
                This was only ignored for development purposes, we should not
                replace

                released images.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: sync after writing config.json"
              hash: f0838aaee9751a6fb60558a7646d597b1f99b1c3
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: Stick to POSIX-compliant [ instead of [["
              hash: 2c6a97c263a71c63387290fca29ba5b01eba8db4
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "balena-generate-ami.sh: Remove useless statements"
              hash: 9d4ac02f3ad8eadaed79703dbc859c4950449810
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "jenkins_generate_ami.sh: Use architecture as suffix instead of machine
                name"
              hash: 7d2e3911defedc500b3b1ded3268dbe74bb523b0
              body: >
                This removes the necessity for the DT being named generic-*. It
                also means

                all the DTs of the same architecture will preload the same app.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "jenkins_build.sh: pass MACHINE to jenkins_generate_ami.sh"
              hash: 0e33582e2860474e1c6aff5275539b1333aef6b9
              body: >
                This removes the dependency on JOB_NAME from
                jenkins_generate_ami.sh
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "AMI automation: Adjust AMI names to be compatible with AWS API"
              hash: bc91b7036b32aa57c053c115ac87b7f21fa634c8
              body: ""
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: "AMI automation: Correct S3 bucket name and key"
              hash: 8864adcb20c1f4cbfd48e422dbae44b885c8ca06
              body: ""
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: "AMI automation: Add a separate container for generaing AMI"
              hash: d7d91ff4c3ea655dfa9a483a020d2d16aa5e0f49
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: "AMI automation: shellcheck and resolve violations"
              hash: 6b11dd26bc1229aafed98c5933f23e892811f49f
              body: ""
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: "AMI automation: Use staging env by default"
              hash: 21fa55a6f73faf59fe5fc3b1e6e8bc4084e17c01
              body: ""
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
            - subject: "AMI automation: Simplify public ssh addition. Do not use sudo"
              hash: dd96771607f79620a241e4dee99879542643f55f
              body: ""
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
            - subject: "automation: Generate and publish AMI from the raw balenaOS image"
              hash: efe2b5beb5ea6b00fff07372a312c7e0c690654b
              body: ""
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
          version: balena-yocto-scripts-1.15.0
          date: 2021-10-01T04:12:24.310Z
        - commits:
            - subject: "balena-deploy: When deploying hostapp default to using slug as name"
              hash: d9ee5fa5f5a97de9c41c2acc13b6c7335e2b043f
              body: >
                Using the device type is incorrect as aliases are not taken into
                account.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena-api: Do not use balena_lib_resolve_aliases"
              hash: d50cee134436914b4960254abd0a5cf28b40f764
              body: >
                That function is now for internal use, replace with
                balena_lig_get_slug()

                which is clearer.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "balena_lib: Make resolve_aliases local so it is not globally used"
              hash: 45a0f62debdbf9e20d56e8bba8a9567359d7e8e4
              body: >
                The correct call is balena_lib_get_slug(device_type), which
                resolves

                aliases too.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.14.9
          date: 2021-08-20T17:33:15.811Z
  version: 2.83.10+rev3
  date: 2021-11-05T08:31:48.138Z
- commits:
    - subject: "balena-image: Install boot overlays in the root partition"
      hash: b8de2384bf0351829d574b1964324f7f0a69108a
      body: ""
      footer:
        Signed-off-by: Alexandru Costache <alexandru@balena.io>
        signed-off-by: Alexandru Costache <alexandru@balena.io>
        Changelog-entry: "balena-image: Install boot overlays in the root partition"
        changelog-entry: "balena-image: Install boot overlays in the root partition"
      author: Alexandru Costache
      nested: []
  version: 2.83.10+rev2
  date: 2021-09-29T11:24:06.775Z
- commits:
    - subject: Update meta-balena from v2.83.5 to v2.83.10
      hash: 9fbfab9f41608329bcf308fc16d714e32d98596a
      body: |
        Update meta-balena from 2.83.5 to 2.83.10
      footer:
        Changelog-entry: Update meta-balena from v2.83.5 to v2.83.10
        changelog-entry: Update meta-balena from v2.83.5 to v2.83.10
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested:
        - commits:
            - subject: "kernel-balena: Add function to conditionally configure based on
                version"
              hash: 9787d2879d2f372c19f336c7e08bd0e6fee16ae7
              body: >
                Some kernel configuration are only applicable from specific
                kernel

                versions. This commit adds a function that allows to add a specific

                configuration set only from a given kernel version.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "kernel-balena: Split function to get kernel version from source"
              hash: c349f647db328558f026f1b914bc0246dc33bda5
              body: >
                This allows to re-use this functionality. Note that the
                `KERNEL_VERSION`

                variable is only available after the kernel has been built as it relies

                on get_kernelversion_headers() poky function and utsrelease.h being

                generated. This function parses the Makefile so only needs the source.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "kernel-resin: Add as symlink to kernel-balena"
              hash: 129128574dbf38c46c0cc7121cdf6fd0f38ef64b
              body: |
                This avoids introducing a breaking change.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: "kernel-balena: Replace and deprecate kernel-resin"
              hash: 8c0d2ce52d42e72a939d248784d67dc2413c0443
              body: >
                New device types should use kernel-balena instead of
                kernel-resin.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.10
          date: 2021-08-18T19:03:21.519Z
        - commits:
            - subject: "recipes-connectivity: improve NTP dispatcher script"
              hash: d060bfa3581f6920fa2e353abaf82d2913d60e67
              body: >
                Change the NetworkManager NTP dispatcher script to update the

                on/offline status of the NTP sources on 'connectivity-change' events

                instead of 'up/down' events.


                Currently 'chronyc onoffline' is run for 'up/down' events on any

                network interface. It makes more sense to run it for

                'connectivity-change' events as we are really interested in whether

                the internet is there or not rather than whether an interface is

                up or down.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: "recipes-connectivity: improve NTP dispatcher script"
                changelog-entry: "recipes-connectivity: improve NTP dispatcher script"
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.9
          date: 2021-08-17T10:37:50.423Z
        - commits:
            - subject: Update balena-engine to v19.03.24
              hash: 1d3d0d0c8ef60710eaa67d68b5f606eb22e6fd28
              body: |
                Update balena-engine from 19.03.23 to 19.03.24
              footer:
                Changelog-entry: Update balena-engine to v19.03.24
                changelog-entry: Update balena-engine to v19.03.24
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested:
                - commits:
                    - subject: prevent slice oob access in concatReadSeekCloser
                      hash: 1e7045ac957db17fe9838602c9339c0b5ae5c282
                      body: ""
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Martin Rauscher
                      nested: []
                  version: balena-engine-19.03.24
                  date: 2021-08-12T08:30:08.031Z
          version: meta-balena-2.83.8
          date: 2021-08-17T07:29:06.381Z
        - commits:
            - subject: "grub: don't package or install bindir utils"
              hash: f1835282ecd3b0f9dfc52410d8f1628653e2c1b2
              body: >
                Remove ${bindir} from FILES_grub-common, ensuring grub utilities
                aren't

                installed to /usr/bin, in addition to a previous similar commit that

                removed sbin utils. This frees approximately 5.5M.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.7
          date: 2021-08-14T14:48:17.382Z
        - commits:
            - subject: "balena-os-sysctl: disable user namespacing by default"
              hash: 31c3ae8ad5c7ad45e450349b6972524da120e96c
              body: >
                Most major distributions now ship kernels with user namespacing
                enabled

                in the kernel config. Some distributions, such as Arch and Ubuntu,

                default to the upstream behavior of allowing unprivileged user

                namespacing, regardless of potential attack surfaces exposed in the

                kernel.


                Other distributions, such as Debian, are slightly more conservative,

                disabling the feature at runtime behind a sysctl tunable. Debian

                maintains its own patch to add the kernel.unprivileged_userns_clone

                tunable.


                The Debian patch was rejected by upstream over fears of application

                developers not using this feature due to it being generally unavailable

                in systems, as well as fears of bugs going undiscovered.


                RHEL uses a newer tunable introduced upstream to set the max number of

                user namespaces to zero, which accomplishes the same thing, but without

                an out of tree patch.


                Disable user namespacing at runtime using the same method as RHEL, in

                the same manner as the hardened kernels and distributions have chosen.


                https://lwn.net/Articles/673597/

                https://lists.debian.org/debian-kernel/2020/03/msg00237.html
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: "common: kernel-resin: enable user namespacing"
              hash: 04d9561760b449024a5b411bd366ded2351cd5cd
              body: >
                Enable CONFIG_USER_NS, a kernel feature used for user
                namespacing, and

                required for docker-in-docker.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.6
          date: 2021-08-13T16:30:49.145Z
  version: 2.83.10+rev1
  date: 2021-08-23T07:34:05.152Z
- commits:
    - subject: Improve the provisioning instructions for rockpi-4b-rk3399
      hash: a075368db52e55524e99efb5401dd5d659b3cbc7
      body: ""
      footer:
        Changelog-entry: Improve the provisioning instructions for rockpi-4b-rk3399
        changelog-entry: Improve the provisioning instructions for rockpi-4b-rk3399
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.5+rev3
  date: 2021-08-18T14:13:55.253Z
- commits:
    - subject: Add missing u-boot hostapp update hook
      hash: ba4d646763a484f9e7e2a01f6ac2627d67aa1c21
      body: |
        We need this hook for u-boot based boards
      footer:
        Changelog-entry: Add missing u-boot hostapp update hook
        changelog-entry: Add missing u-boot hostapp update hook
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.5+rev2
  date: 2021-08-14T03:20:22.071Z
- commits:
    - subject: Update meta-balena from v2.83.1 to v2.83.5
      hash: b9df3f234505b8cb84d99ab86aa64485916ada7c
      body: |
        Update meta-balena from 2.83.1 to 2.83.5
      footer:
        Changelog-entry: Update meta-balena from v2.83.1 to v2.83.5
        changelog-entry: Update meta-balena from v2.83.1 to v2.83.5
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested:
        - commits:
            - subject: "resin-u-boot.bbclass: Make console silencing change more resilient"
              hash: 6f173d763828d63f70582219aa19333b1e599a57
              body: >
                There is at least a case in a board where the puts function in
                u-boot's

                common/console.c is #ifdef'ed and defined twice. Let's accomodate for

                such cases by correctly looping through more than one function

                definition if present.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.83.5
          date: 2021-08-13T08:16:50.739Z
        - commits:
            - subject: "balena-os: pin linux-firmware to 20210511 from hardknott"
              hash: e7a72c3e82587ffd2388656de71340afdddc9156
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: "linux-firmware: upgrade 20190815 -> 20210511"
              hash: 497fa316fec3ef99a14872208abb85f7e932922d
              body: |
                Add recipe from poky hardknott, revision 74dbb08
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.4
          date: 2021-08-11T16:09:10.911Z
        - commits:
            - subject: "supervisor: Consolidate supervisor container removal"
              hash: f533be0ee1d6f42801f29426929e5f8b18035b9b
              body: |
                Avoid removing supervisor containers in 3 different places
                and consolidate the steps into start-balena-supervisor.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.3
          date: 2021-08-05T18:58:49.620Z
        - commits:
            - subject: "tests: Fix insecure registry error"
              hash: 647d683dbfd0461706e75291c5396752fdc1b2ce
              body: >
                introduced when images including
                8227a61f6bef6d93cc6a5acd0ef93a2012079964

                made it to production.

                We can now use a runtime drop-in unit placed under /run/systemd/ to

                configure the balena-host service, which doesn't require us to remount

                the rootfs.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.83.2
          date: 2021-08-05T13:55:32.372Z
    - subject: Update balena-yocto-scripts from v1.14.7 to v1.14.8
      hash: 8a69515b9e9e2cf136b317e2d68ef2477464f8f3
      body: |
        Update balena-yocto-scripts from 1.14.7 to 1.14.8
      footer:
        Changelog-entry: Update balena-yocto-scripts from v1.14.7 to v1.14.8
        changelog-entry: Update balena-yocto-scripts from v1.14.7 to v1.14.8
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested:
        - commits:
            - subject: Use slug when setting deviceType for leviathan
              hash: bc628771aa0014e86e649e3312b48e1c7ae4968c
              body: ""
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.14.8
          date: 2021-07-22T14:51:50.560Z
    - subject: Add balena-yocto-scripts upstream source
      hash: ba5dbf5d280fce00f834c9effe3038699d50b1c5
      body: >
        This allows to add nested changelogs from the balena-yocto-scripts
        repository

        from version >= 1.14.1
      footer:
        Changelog-entry: Add balena-yocto-scripts upstream source
        changelog-entry: Add balena-yocto-scripts upstream source
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.5+rev1
  date: 2021-08-13T15:52:18.818Z
- commits:
    - subject: Fix bluetooth on rockpi-4b-rk3399
      hash: 8e3c8191353729e09246875a1f102ac04f514951
      body: ""
      footer:
        Changelog-entry: Fix bluetooth on rockpi-4b-rk3399
        changelog-entry: Fix bluetooth on rockpi-4b-rk3399
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.1+rev3
  date: 2021-08-12T14:39:04.763Z
- commits:
    - subject: Fix boot partition number in rockpi-4b-rk3399.coffee
      hash: 2e3aa7891a4263701cd9bcc76c3e90b958768f8b
      body: |
        The rockpi-4b-rk3399 uses a different partitioning scheme
        so let's set here the correct boot partition number.
      footer:
        Changelog-entry: Fix boot partition number in rockpi-4b-rk3399.coffee
        changelog-entry: Fix boot partition number in rockpi-4b-rk3399.coffee
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.1+rev2
  date: 2021-08-04T14:57:38.470Z
- commits:
    - subject: Add initial support for rockpi-4b-rk3399
      hash: 4781a9b258391b2f027d811e99bcb6f9bdebb87a
      body: ""
      footer:
        Changelog-entry: Add initial support for rockpi-4b-rk3399
        changelog-entry: Add initial support for rockpi-4b-rk3399
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.1+rev1
  date: 2021-08-04T13:09:22.399Z
