- commits:
    - subject: Update balena-yocto-scripts to v1.16.1
      hash: 1a08f2e538d069650698096c24351824af4b070f
      body: |
        Update balena-yocto-scripts from v1.16.0 to v1.16.1
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.1
        changelog-entry: Update balena-yocto-scripts to v1.16.1
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: 'revert_overrides: Add intel-quark to architecture overrides'
              hash: cbcbbc42c10700c77e17d8f9224e35bec90280fe
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.1
          date: 2022-01-11T14:37:00.027Z
  version: 2.85.2+rev7
  date: 2022-01-12T18:23:30.360Z
- commits:
    - subject: Update balena-yocto-scripts to v1.16.0
      hash: 53109f3046bfce040fdeade6ed37dea31b14f701
      body: |
        Update balena-yocto-scripts from v1.15.8 to v1.16.0
      footer:
        Change-type: patch
        change-type: patch
        Changelog-entry: Update balena-yocto-scripts to v1.16.0
        changelog-entry: Update balena-yocto-scripts to v1.16.0
        Signed-off-by: Alex Gonzalez <alexg@balena.io>
        signed-off-by: Alex Gonzalez <alexg@balena.io>
      author: Alex Gonzalez
      nested:
        - commits:
            - subject: 'balena-deploy: Check for file existence before deploying'
              hash: 36494bf99a08b68a5afac5038d4691a583d01500
              body: >
                When discontinuing a device type, there are no artifacts apart
                from

                device-type.json, so check that the logo is there before
                deploying.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-deploy-block: Check existence of tag before re-deploying'
              hash: c1a5b20b0ef0d04a30b6bf0bcfacf0a527e931ae
              body: >
                If a release is already tagged with this version, issue a
                warning and

                bail out.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-api: Add function to check the existence of a release tag'
              hash: bdc2146c3ad719f5c7335aeb7b4ee43775a20ac7
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-deploy-block: Finalize releases when deployed'
              hash: 1e3768132d87295998bd9a17d0f01121e161e312
              body: >
                For now and until a proper CI/CD workflow is in place, finalize
                releases

                on deployment.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Accept deployments without balena.yml
              hash: 23c1f91993f37a18ade26ceef621e24409be5f74
              body: >
                If no balena.yml file exists, the deployment will go through
                without

                setting a release semver.


                For the time being we are still using a version label in the
                hostapp.


                This commit will be reverted once we get rid of the version
                label.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Accept deployments without balena.yml
                changelog-entry: Accept deployments without balena.yml
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_generate_ami: Remove variant from image name'
              hash: 0fe3d6c8d0ebff85248f0bed99750186f05ab686
              body: |
                The OS is now a unified image so there are no variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-build.sh: Stop building OS variants'
              hash: 4e65c83e7808e91c99e335609142401e0031ed23
              body: |
                The OS is now a unified image so there are no variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_build.sh: Remove buildFlavor'
              hash: b66f7ce58f0c12f78941ed34eb311bbd3a96af1c
              body: |
                The OS is now a unified image so there are no build flavours.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_build-blocks: Remove variant build option'
              hash: e7fb9fc8354445bcbc05687e1f96aa0e8025ecc9
              body: |
                The OS is now a unified image without variants.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-deploy: Stop using .dev/.prod variant suffixes'
              hash: 65c030b986f62b0faaddba501520662a8ac2777d
              body: >
                The OS has now a unified image that can be configured to be
                development

                or production mode.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-deploy-block: Stop tagging hostapp releases with variant'
              hash: 3fc5efeeef4ae74e499504c1148932539a49c28e
              body: >
                The API will stop using the variant tag but will still use the
                version

                tag.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-lib: Use externalVersion to match contracts'
              hash: 385c5bacfc1452e4b065de55bfdf71727b303fff
              body: >
                The version refers to the actual contract, while the
                externalVersion is

                the one that refers to the balenaOS revision.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_build: Deploy hostapp like any other block'
              hash: bfe7f51dc75f335d38fa4dbf824fa887be8d82ee
              body: |
                Use common functions for block deployments
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_build-blocks: Separate block build release deployment'
              hash: 70fe00969921bbf6894cc86ecb343eb342c6f2ca
              body: >
                Separating the build and release of blocks allows to use common
                code for

                block release.


                Also, pass a flag to specify whether the block should be
                deployed as final

                release.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-deploy-block: Use release versioning'
              hash: d1c74d0261f17ebcad9825bc7e0df22142da14a3
              body: >
                Deploy as draft releases by default. Final releases will be
                flagged

                once validation passes.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_build: Remove discontinued check'
              hash: 55774ee27f938bbcbb238aa6441680b3d39172c3
              body: >
                Individual deploy functions now bail out for discontinued device
                types,

                there is no need to check for it here.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-deploy: Do not deploy discontinued device types'
              hash: f54251e61c466018072e04c344595b3eba70bf57
              body: >
                Check for discontinued device types before deploying to
                dockerhub or

                to balenaCloud.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-deploy: Discontinued device types use meta-balena version'
              hash: bbecd72c64bf8ff1277a10c03cb39fbf99748e05
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: >-
                balena-deploy: Adapt balena_deploy_block to release versioning
                and use it
              hash: cfc0bc43af1fb60ff3ddd56f08ae781edaa90b68
              body: >
                * Convert balena_deploy_build_block to balena_build_block, and
                deploy
                  with balena_deploy_block
                * Remove balena_deploy_hostapp and replace with
                balena_deploy_block

                * Modify balena_deploy_hostos to use balena_deploy_block

                * Modify balena_deploy_block to use release versioning


                By deafult image deployments happen as draft versions, and only
                become

                final when passing validation.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-build-block: Remove image release'
              hash: 443269afbe867cb5c464ca5dd91bf27aa51427bd
              body: >
                Deal with the release separately so we can use common code for
                it.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-api: Use release revision for fetchers'
              hash: f501ac55e327af0db2142a146423e83f459e0c1f
              body: >
                When fetching images for blocks, use a given release revision.


                Also, add token autentication to the API calls that miss it so
                that they work

                with private device types.


                Finally, fix indentation.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_build-block: Remove release version API setter'
              hash: 8e27328a0caec2acc7651dfe64f8dfc5510e48e0
              body: >
                When using the now deprecated release_version field, the API
                would

                reject deployments for an existing release.


                On the new versioning model, deployments increment a revision
                field so

                there is no need to check for uniqueness.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-api: Remove release version API setter'
              hash: 42486a59654047cf42f19bd999ef0bcd0a279ea5
              body: >
                This functionality has now been deprecated in the balena API is
                favour

                of draft/final release versioning.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-lib: Use release versioning'
              hash: de2c7af440c1ae4d6f84c5440368f92333500389
              body: >
                BalenaCloud has now a release versioning feature that deprecates
                the

                use of release_version.


                Introduce a new balena_lib_release() function that utilises a
                balena

                contract and the CLI to set the release version.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.16.0
          date: 2021-12-30T15:08:43.225Z
        - commits:
            - subject: >-
                balena-deploy: Set leviathan networkWireless mode based on
                device slug
              hash: 891fadcbabe422e24245beb720cf7326a5ea1136
              body: >
                These changes are currently made in the Jenkins job, so it's
                preferrable

                to have it done by the packaging scripts.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.15.10
          date: 2021-12-02T21:08:09.863Z
        - commits:
            - subject: Substitute the worker types for generic device slugs
              hash: 7539caf732975a5b114abc371a5f6df211d12812
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.15.9
          date: 2021-11-26T19:20:31.029Z
  version: 2.85.2+rev6
  date: 2022-01-03T11:24:13.833Z
- commits:
    - subject: Fix bluetooth firmware loading
      hash: f2ec405715e7ad12aaba14c6c00d38de7a8b3c41
      body: |
        There are cases when the rootfs is read-only. In such cases,
        the approach of updating the systemd service responsible for
        loading the bluetooth firmware will not work.

        Instead we rework it and use an udev rule and systemd service
        combination to load the bluetooth firmware.

        Also, we change the logic of getting the /dev node because
        the current device tree does not define a node named "bt_uart"
        and instead we grep for "wireless-bluetooth".
      footer:
        Changelog-entry: Fix bluetooth firmware loading
        changelog-entry: Fix bluetooth firmware loading
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.85.2+rev5
  date: 2021-12-09T14:02:51.973Z
- commits:
    - subject: Turn i2c7 bus on by default
      hash: dd5260d36b9618dcc7bb94980e59d87ea75091e9
      body: >
        load i2c7 bus by default as this is the main i2c bus on the 40 pin head,
        physical pins 3 and 5
      footer:
        Closes: '#26'
        closes: '#26'
        Change-type: patch
        change-type: patch
        Changelog-entry: Turn i2c7 bus on by default
        changelog-entry: Turn i2c7 bus on by default
        Signed-off-by: Aaron Shaw <shawaj@gmail.com>
        signed-off-by: Aaron Shaw <shawaj@gmail.com>
      author: Aaron Shaw
      nested: []
  version: 2.85.2+rev4
  date: 2021-11-22T22:52:20.601Z
- commits:
    - subject: 'balena-image: Install overlays in correct directory'
      hash: 7783822ffb7bdb8bbb7ce937e5ca9667938fad05
      body: |
        The are currently incorectly installed
        in the boot partition, instead of the overlays
        directory. Let's fix that.
      footer:
        Changelog-entry: 'balena-image: Install overlays in correct directory'
        changelog-entry: 'balena-image: Install overlays in correct directory'
        Signed-off-by: Alexandru Costache <alexandru@balena.io>
        signed-off-by: Alexandru Costache <alexandru@balena.io>
      author: Alexandru Costache
      nested: []
  version: 2.85.2+rev3
  date: 2021-11-17T16:13:36.171Z
- commits:
    - subject: >-
        Backport u-boot fat fs related patch in order to fix write failure when
        saving bootcount
      hash: 59df2b1eff5a491c09df606261f2dd14e1817d8b
      body: |
        We backport an u-boot patch in order to fix the following:
        writing bootcount.env
        Error Invalid FAT entry 0x3ffffffa
        Invalid FAT entry
        Error Invalid FAT entry 0x3ffffffa
      footer:
        Changelog-entry: >-
          Backport u-boot fat fs related patch in order to fix write failure
          when saving bootcount
        changelog-entry: >-
          Backport u-boot fat fs related patch in order to fix write failure
          when saving bootcount
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.85.2+rev2
  date: 2021-11-10T18:35:09.211Z
- commits:
    - subject: Update meta-balena from v2.83.10 to v2.85.2
      hash: d7e6adda34c40c26a688010af3787b47522ecb86
      body: |
        Update meta-balena from 2.83.10 to 2.85.2
      footer:
        Changelog-entry: Update meta-balena from v2.83.10 to v2.85.2
        changelog-entry: Update meta-balena from v2.83.10 to v2.85.2
        Signed-off-by: Alexandru Costache <alexandru@balena.io>
        signed-off-by: Alexandru Costache <alexandru@balena.io>
      author: Alexandru Costache
      nested:
        - commits:
            - subject: Update balena-engine to v19.03.29
              hash: a2ed32e139489afd89e59e0e63a7c676969de3d8
              body: |
                Update balena-engine from 19.03.26 to 19.03.29
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-engine to v19.03.29
                changelog-entry: Update balena-engine to v19.03.29
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested:
                - commits:
                    - subject: 'pkg/storagemigration: use graphdriver/copy.DirCopy'
                      hash: ffbb608492405488bff5e31ea62c0249fb416106
                      body: |
                        instead of our own implementation
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.29
                  date: 2021-09-14T15:38:47.823Z
                - commits:
                    - subject: Prune Jenkinsfile
                      hash: ea14e503181bbb248a4bed1b86a227d9c214cbfb
                      body: >
                        we are not using it for our CI, and it confuses jenkins
                        set up on the

                        balena-os org
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.28
                  date: 2021-09-14T14:54:48.288Z
                - commits:
                    - subject: Backport platform-detection fixes from containerd
                      hash: 9f71253561b1cd2f262ec0d6e81c5fbd09a7a0a1
                      body: >
                        See https://github.com/containerd/containerd/pull/4530

                        and `git log
                        ad25c1a9c34361e4071f508b9a91946b05fce165^..2055e12953bb538228d8d9fe627fa545d7cf82be
                        ./platforms/`

                        in the containerd repo
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.27
                  date: 2021-09-01T18:43:57.993Z
          version: meta-balena-2.85.2
          date: 2021-09-17T20:43:01.200Z
        - commits:
            - subject: Fix typo in OS_DEVELOPMENT distro feature
              hash: 7992a7900506eaf0279f93c747dea1520875c817
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
            - subject: 'tests: Remove OS variants'
              hash: 5545c4e15831e16497a737307da69d38f947aa51
              body: >
                The OS is now a single image that can switch between development
                and

                production modes at runtime.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.1
          date: 2021-09-17T14:02:11.331Z
        - commits:
            - subject: Replace image variants with development mode
              hash: 0c7c629dcde13de9188f05f6f551f34837ad84ff
              body: >
                The dual image variants are replaced with a runtime
                configuration switch

                for development mode.


                Fixes #2226

                Fixes #1058

                Relates to: balena-io/balena-io#2247
              footer:
                Change-type: minor
                change-type: minor
                Changelog-entry: Replace image variants with development mode
                changelog-entry: Replace image variants with development mode
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-supervisor: Update balena-supervisor to v12.10.10'
              hash: 1aa662a4ab11f32c71d13352eea7e86c0784df33
              body: |
                Update balena-supervisor from 12.10.3 to 12.10.10
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested:
                - commits:
                    - subject: >-
                        api-keys: Remove os variant parameter for authentication
                        check
                      hash: 9e0cbe04c6d1c533c3e66183eca1d3abfb8c381d
                      body: >
                        The current code authenticates unmanaged production
                        devices which makes

                        no sense. Unmanaged devices do not need to authenticate
                        with the API.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                    - subject: >-
                        os-release: Use developmentMode to ascertain OS variant
                        in new releases
                      hash: 1abd10a12947f05ae328496e98fcbcdc6a834ce1
                      body: >
                        Newer BalenaOS releases have replaced OS variants for a
                        developmentMode

                        configuration setting. This commit uses this variable to
                        set the OS

                        variant in the absence of `VARIANT_ID` from the
                        os-release file.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                    - subject: 'config: Add developmentMode to schema'
                      hash: 4ad7a3ae917c888f267463fd3d5b839439cf40e6
                      body: >
                        Add a `developmentMode` configuration variable to the
                        schema. Do not expose

                        this on the device target state until local key-based
                        authentication is

                        sorted.
                      footer:
                        Relates-to: >-
                          https://jel.ly.fish/e9525e9e-aa74-478c-b931-52951c679f78
                        relates-to: >-
                          https://jel.ly.fish/e9525e9e-aa74-478c-b931-52951c679f78
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Alex Gonzalez <alexg@balena.io>
                        signed-off-by: Alex Gonzalez <alexg@balena.io>
                      author: Alex Gonzalez
                      nested: []
                  version: balena-supervisor-12.10.10
                  date: 2021-09-07T13:47:51.206Z
                - commits:
                    - subject: Update URL to balena-proxy-config source code
                      hash: 2bcc3aeb56cce11b21d411ee55492109ebaf259f
                      body: >
                        Use a GitHub permalink that includes the commit in

                        case the file changes and the reference becomes
                        out-of-date.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                  version: balena-supervisor-12.10.9
                  date: 2021-09-02T12:25:21.696Z
                - commits:
                    - subject: Bump path-parse from 1.0.6 to 1.0.7
                      hash: 2e38356bf4f5157483017ea2e6670514cbca49c1
                      body: >
                        Bumps
                        [path-parse](https://github.com/jbgutierrez/path-parse)
                        from 1.0.6 to 1.0.7.

                        - [Release
                        notes](https://github.com/jbgutierrez/path-parse/releases)

                        -
                        [Commits](https://github.com/jbgutierrez/path-parse/commits/v1.0.7)


                        ---

                        updated-dependencies:

                        - dependency-name: path-parse
                          dependency-type: indirect
                        ...
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: 'dependabot[bot] <support@github.com>'
                        signed-off-by: 'dependabot[bot] <support@github.com>'
                      author: 'dependabot[bot]'
                      nested: []
                  version: balena-supervisor-12.10.8
                  date: 2021-09-01T20:50:51.601Z
                - commits:
                    - subject: Bump tar from 4.4.13 to 4.4.19
                      hash: b7cb494602fbd050bb9e31b5e8293a080349562c
                      body: >
                        Bumps [tar](https://github.com/npm/node-tar) from 4.4.13
                        to 4.4.19.

                        - [Release
                        notes](https://github.com/npm/node-tar/releases)

                        -
                        [Changelog](https://github.com/npm/node-tar/blob/main/CHANGELOG.md)

                        -
                        [Commits](https://github.com/npm/node-tar/compare/v4.4.13...v4.4.19)


                        ---

                        updated-dependencies:

                        - dependency-name: tar
                          dependency-type: indirect
                        ...
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: 'dependabot[bot] <support@github.com>'
                        signed-off-by: 'dependabot[bot] <support@github.com>'
                      author: 'dependabot[bot]'
                      nested: []
                  version: balena-supervisor-12.10.7
                  date: 2021-09-01T20:40:01.473Z
                - commits:
                    - subject: Remove "variable list" heading in configuration doc
                      hash: 5205e8ce07375a7bf9ca18f0a28bd73c275acd96
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.6
                  date: 2021-09-01T18:06:51.646Z
                - commits:
                    - subject: Clean up configurations.md
                      hash: af51ef8eb54af96cf00657576908f020ac401488
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.5
                  date: 2021-08-31T22:51:45.166Z
                - commits:
                    - subject: Include issues with downgrading versions in README
                      hash: 1280ac365618eb4106e9c20dd4e738a22958d0b7
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Miguel Casqueira <miguel@balena.io>
                        signed-off-by: Miguel Casqueira <miguel@balena.io>
                      author: Miguel Casqueira
                      nested: []
                  version: balena-supervisor-12.10.4
                  date: 2021-08-31T18:51:02.478Z
            - subject: 'u-boot: Introduce a compile time osdev-image feature'
              hash: b839f2d91ca1844d96f4d3165ae5e2923489d11d
              body: >
                At runtime we can now enable development features that were
                previously

                configured using the development-image feature. That feature
                also

                configured U-Boot for OS development.


                Now we have two distinct functionalities:


                * A runtime development configuration variable that configures
                the

                device to facilitate application development

                * A build time osdev-image feature that configures the OS for
                BSP and OS

                development


                This allows us to merge the current production/development
                images into

                a single image.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'os-release: Remove image variants information'
              hash: 4c4dac7e0cc078a9d10c0bb77e4bf702af5f0e55
              body: |
                There are no more image variants.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: Replace DEVELOPMENT_IMAGE and image variants with OS_DEVELOPMENT
              hash: fc369799cdab0012cc9c75aaa4a2e54bb6b2656a
              body: >
                The images now can be configured for application development
                mode at runtime.

                This commit introduces a built time option to configure them for
                BSP or

                other OS development like board bringup.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'images: Remove debug-tweaks settings.'
              hash: cb1618b6d17a6c1118ea65d7485bb1bea907e18e
              body: >
                The ssh development configurations are now applied at runtime.
                The only

                feature that has been left out is the postinst logging.
                Customers that

                need to develop the OS can configure this themselves.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'openssh: Enable runtime development configuration'
              hash: 8bac93b3ed8c54452ea858ffc33a2e46a2e3358d
              body: >
                When a device is configured in development mode, allow password

                authentication and empty passwords, as well as root logins.


                In production mode, disable password authentication to allow
                only

                SSH access.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-info: Rename from resin-info'
              hash: 7f2abbf9a26c376125d18bd625f639f26d578d12
              body: |
                Replace references to resin for balena.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena: Expose engine socket on development mode'
              hash: 858f3b983e7842a155f0a34d60b6a8f488bacb2e
              body: >
                When configured in development mode expose the engine socket.
                This is

                currently used for local mode development.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'image-balena: Allow passwordless root logins'
              hash: 71aeea3652bf095544b1083023aa5d4e97448597
              body: >
                Even without debug-tweaks, allow passwordless root logins. For
                production

                builds there is no console available so this setting does not
                change current

                functionality.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'image_balena: Remove "balena" hostname from development images'
              hash: 7b57e9caf4fa82bd05091becfe1b750bca033342
              body: >
                There is no reason not to have development images use the uuid
                as

                hostname in the same way production images do.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'systemd: Runtime enablement of serial console'
              hash: d80092c6ecf67720175b72ccbcbf7da6c907d48f
              body: >
                Adapt the systemd getty services to enable for images configured
                for

                development.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: >-
                development-features: Add service for development features
                runtime management
              hash: 5227ba18d0fe81fabae2b33b3f0cd9f690f85973
              body: >
                This service will adjust the filesystem with development
                features based on

                the `developmentMode` setting on `config.json`.
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.85.0
          date: 2021-09-15T09:05:37.493Z
        - commits:
            - subject: 'hostapp-update-hooks: Fix blacklisted extlinux.conf file path'
              hash: 096024808224aea2100e2a2a1f95ef75e23493ef
              body: >
                The extlinux.conf file path in meta-balena is currently

                incorrect, let's update it's boot partition path so that

                BalenaHUP won't need to transfer the isolcpus setting to

                the new OS anymore. This is necessary only when updating from
                older

                OS versions in which the supervisor adds the isolcpus

                setting to the boot partition extlinux.conf file.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: meta-balena-2.84.7
          date: 2021-09-13T12:01:41.123Z
        - commits:
            - subject: 'balena-persistent-logs: add comment and update logging'
              hash: c05ff73df2341ceb182f7bc1acf00d4719a13afd
              body: |
                Add a comment and update the logging.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'balena-persistent-logs: add comment and update logging'
                changelog-entry: 'balena-persistent-logs: add comment and update logging'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'meta-balena: rename resin-persistent-logs'
              hash: 2fa5bead70a700eff06ea8d140974ea3925a0c7d
              body: |
                Rename 'resin-persistent-logs' to 'balena-persistent-logs' and
                update all references.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'meta-balena: rename resin-persistent-logs'
                changelog-entry: 'meta-balena: rename resin-persistent-logs'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.84.6
          date: 2021-09-11T12:14:21.164Z
        - commits:
            - subject: 'tests: led: require led property from device type'
              hash: 0439de2a706cabf2b6b82736fa2959313c653c56
              body: >
                Only run LED test when device type contract specifies support
                for it
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.84.5
          date: 2021-09-10T13:29:21.135Z
        - commits:
            - subject: 'tests: Remove reboots from redsocks test cases'
              hash: 53f58ca927075730d9bb9ebe0a98e525f3d8d793
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.84.4
          date: 2021-09-09T20:26:17.261Z
        - commits:
            - subject: >-
                tests: Prevent failure when journalctl has no logs for some
                boots
              hash: cab2b5aa7b97afad9006ed3c3701e49a9d76d366
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.84.3
          date: 2021-09-09T11:41:46.786Z
        - commits:
            - subject: >-
                contributing-device-support.md: Updates to board support
                instructions
              hash: 56d47e97ab2becea9d7ecd96de397d937f539954
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.84.2
          date: 2021-09-08T13:26:00.933Z
        - commits:
            - subject: 'tests: s/BALENA_MACHINE_NAME/BALENA_ARCH'
              hash: 16015b5ba1570777478a585aaea37ed354dacc82
              body: >
                Replace Dockerfile image %%BALENA_MACHINE_NAME%% var with

                %%BALENA_ARCH%% for better compatibility


                Device types lacking matching tags in the balenalib Docker Hub
                account

                will fail tests when a matching image is not found. Switch to

                BALENA_ARCH instead, to maintain compatibility.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.84.1
          date: 2021-09-05T16:47:16.988Z
        - commits:
            - subject: 'balena-engine: Enable storage migration'
              hash: 7d69faa7889e6725a4397511a6178ed2c745acbd
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
            - subject: Update balena-engine to v19.03.26
              hash: a7538159d2015a61dc3effc5e3fe390056d0265b
              body: |
                Update balena-engine from 19.03.24 to 19.03.26
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-engine to v19.03.26
                changelog-entry: Update balena-engine to v19.03.26
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested:
                - commits:
                    - subject: 'storagemigration: capture failcleanup logs in logfile'
                      hash: 4f7f543eff08766bc584024afdb57760dfb52130
                      body: >
                        reorder the defer statements in the migrate function to
                        only teardown

                        the logger after the failcleanup function ran. otherwise
                        errors logged

                        there won't show up in the logfile
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.26
                  date: 2021-08-31T11:26:15.276Z
                - commits:
                    - subject: 'storagemigration: move logic to package'
                      hash: 001835bf61172fdcfdb0416e000852ff05683c71
                      body: >
                        This brings all migration logic into a single call into
                        the

                        storagemigration package, which should make future
                        maintenance easier

                        and fixes the cleanup logic bug, where the old aufs root
                        would never be

                        cleaned up.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Robert Günzler <robertg@balena.io>
                        signed-off-by: Robert Günzler <robertg@balena.io>
                      author: Robert Günzler
                      nested: []
                  version: balena-engine-19.03.25
                  date: 2021-08-20T15:55:35.623Z
          version: meta-balena-2.84.0
          date: 2021-09-03T11:43:21.582Z
        - commits:
            - subject: 'tests: remove healthcheck test race condition'
              hash: 4f728271e767e8998f73870c2de23c03a5d12823
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.83.22
          date: 2021-09-02T15:34:27.322Z
        - commits:
            - subject: 'tests: Register teardown only when DUT is reachable'
              hash: 2f01b040236f6565195550cdfde91464687f5cf2
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Ryan Cooke <ryan@balena.io>
                signed-off-by: Ryan Cooke <ryan@balena.io>
              author: rcooke-warwick
              nested: []
          version: meta-balena-2.83.21
          date: 2021-09-01T22:56:06.844Z
        - commits:
            - subject: 'tests: Use new Archiver implementation & helpers'
              hash: 883ec60492a16b443cb6ce04c12cda8bbf4d028d
              body: |
                The changes are as follows:
                1. Delete custom logic in tests for archiving logs
                2. Make use of the new archiveLogs helper
                3. Make use of the new implementation of the Archiver module
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
                signed-off-by: Vipul Gupta (@vipulgupta2048) <vipul@balena.io>
              author: Vipul Gupta (@vipulgupta2048)
              nested: []
          version: meta-balena-2.83.20
          date: 2021-09-01T19:37:21.036Z
        - commits:
            - subject: 'tests: List boots when collecting journal logs in hup suite'
              hash: 8e7b6a157b033db57ff2df75a63b5e054957803f
              body: |
                Some OS versions before HUP do not support the '-b all' flag
                to journalctl. This commit reverts to the original behaviour
                that lists the boots and requests the logs for each boot.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.19
          date: 2021-09-01T13:25:10.726Z
        - commits:
            - subject: 'balena-supervisor: Update balena-supervisor to v12.10.3'
              hash: 782c9e24b91b5beb1c30c7643015c6fe7f53d2d2
              body: |
                Update balena-supervisor from 12.9.3 to 12.10.3
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested:
                - commits:
                    - subject: >-
                        Skip restarting services if they are part of conf
                        targets
                      hash: 669866b4c296529bd5392a0c48cd389a6d1f5770
                      body: >
                        Some recent changes to the OS allowed some services to
                        restart

                        automatically when the associated config files are
                        changed.


                        In these cases we want to avoid restarting the same
                        services

                        manually from the supervisor.
                      footer:
                        Change-type: patch
                        change-type: patch
                        Signed-off-by: Kyle Harding <kyle@balena.io>
                        signed-off-by: Kyle Harding <kyle@balena.io>
                      author: Kyle Harding
                      nested: []
                  version: balena-supervisor-12.10.3
                  date: 2021-08-24T18:07:03.099Z
                - commits:
                    - subject: Removed fire emoji prefix for firewall logs.
                      hash: 30c728fae23ee66f3c1612736bb0c300f0b0762d
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: peakyDicers
                      nested: []
                  version: balena-supervisor-12.10.2
                  date: 2021-08-02T21:27:42.412Z
                - commits:
                    - subject: Fix regression with local mode push
                      hash: 6f5f3bc2f3aea1bf5e5772533be80c3bfbb4e3a9
                      body: >
                        PR #1749 introduced a bug when pushing local target
                        state. An update to

                        the [image name
                        normalization](https://github.com/balena-os/balena-supervisor/blob/f1bd4b8d9bcef29e326cbf97eaddd837c2704d19/src/lib/docker-utils.ts#L81)

                        failed to consider the local image name format. This
                        results in mangling

                        of image names in the database, i.e. the image
                        `ubuntu:latest` is stored

                        as `/ubuntu:latest`. This causes an exception to be
                        returned by the

                        dockerode `getImage('/ubuntu:latest').inspect()` call.


                        This sends the supervisor into a crash loop and is shown
                        on the supervisor

                        journal logs as


                        ```

                        getaddrinfo ENOTFOUND images
                            at GetAddrInfoReqWrap.onlookup [as oncomplete] (dns.js:64:26)
                        ```


                        Unfortunately if this happens on a user device, since
                        the mangled image

                        name is already on the database, the easiest way to fix
                        is to remove the

                        supervisor database and let the supervisor recreate it.
                        Deleting the

                        database should be side effect free.
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.10.1
                  date: 2021-08-02T15:55:28.001Z
                - commits:
                    - subject: >-
                        Remove comparison based on image, release, and service
                        ids
                      hash: b67f94802dd8c2e890121f6ca82eda8dff2c051c
                      body: >
                        Preparing for the new v3 target state, where the
                        supervisor will make environment

                        dependent ids optional and rely on using general UUIDs
                        and user known identifiers

                        for comparison. This PR moves forward in that direction
                        by removing some of those

                        comparisons for v2 target state.


                        - imageId to be replaced with imageName

                        - serviceId to be replace by serviceName

                        - releaseId to be replaced by commit (future
                        release_uuid)


                        This is a backwards compatible change, meaning it
                        doesn't completely get rid of

                        these identifiers (which are still being used by
                        supervisor API and for state

                        patch), but will not depend on those identifiers for
                        calculating steps to target state.
                      footer:
                        Change-type: minor
                        change-type: minor
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.10.0
                  date: 2021-07-28T14:00:22.581Z
                - commits:
                    - subject: Use tags to track supervised images in docker
                      hash: f1bd4b8d9bcef29e326cbf97eaddd837c2704d19
                      body: >
                        The image manager module now uses tags instead of docker
                        IDs as the main

                        way to identify docker images on the engine. That is, if
                        the target

                        state image has a name `imageName:tag@digest`, the
                        supervisor will always use

                        the given `imageName` and `tag` (which may be empty) to
                        tag the image on

                        the engine after fetching. This PR also adds checkups to
                        ensure

                        consistency is maintained between the database and the
                        engine.


                        Using tags allows to simplify query and removal
                        operations, since now

                        removing the image now means removing tags matching the
                        image name.


                        Before this change the supervisor relied only on
                        information in the

                        supervisor database, and used that to remove images by
                        docker ID. However, the docker

                        id is not a reliable identifier, since images retain the
                        same id between

                        releases or between services in the same release.


                        List of squashed commits

                        - Remove custom type NormalizedImageInfo

                        - Remove dependency on docker-toolbelt

                        - Use tags to traack supervised images in docker

                        - Ensure tag removal occurs in sequence

                        - Only save database image after download confirmed
                      footer:
                        Relates-to: '#1616 #1579'
                        relates-to: '#1616 #1579'
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.6
                  date: 2021-07-26T13:58:29.275Z
                - commits:
                    - subject: Log the delta URL that will be downloaded on update
                      hash: c05c5803f08ddd31eeddb2000cc5f162fb916003
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                        Closes: '#1755'
                        closes: '#1755'
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.5
                  date: 2021-07-22T15:08:58.505Z
                - commits:
                    - subject: Fix db-helper module for tests
                      hash: 357d1baf6188d89b8552fd9068dbea9ac50aa008
                      body: >
                        The previous module was using `rewire` to get the knex
                        instance from the

                        db module but that was leading to issues when running
                        tests using `test:fast`.

                        This provides a fix for the test module that just
                        removes the destroy

                        call entirely (it turns out it is not necessary).
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Felipe Lalanne
                      nested: []
                  version: balena-supervisor-12.9.4
                  date: 2021-07-08T18:48:09.003Z
          version: meta-balena-2.83.18
          date: 2021-08-31T20:45:45.918Z
        - commits:
            - subject: Assign a fixed name to the balena-healthcheck container
              hash: c80932d323ae99a3b3a3a9120a29b5c67196fc44
              body: |
                This avoids confusion when new containers with random names
                appear in the runtime history of the engine.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.17
          date: 2021-08-31T16:04:47.503Z
        - commits:
            - subject: 'kernel-modules-headers: Copy module.lds'
              hash: 9fca34e0f4faffc0fa049e9341e7392f365bea31
              body: >
                Since kernel v5.10 this file is generated when using
                modules_prepare. As

                the kernel-modules-headers contains pre-built target binaries,
                we also

                need to include this file in the package.


                This is not a problem when using kernel-source as a
                modules_prepare is

                always required.
              footer:
                Fixes: '#2289'
                fixes: '#2289'
                Relates-to: '#1822'
                relates-to: '#1822'
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.16
          date: 2021-08-31T11:22:51.142Z
        - commits:
            - subject: 'kernel-balena: remove global blacklist of btrfs'
              hash: b9d6df84a1acd45df80da8a90ea4ca4dc2940bcf
              body: >
                The kernel-balena class contains a global blacklist of btrfs
                that

                disables this filesystem for all device types, regardless of
                them

                explicitly enabling it.


                Remove this config to allow devices to enable this filesystem.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.15
          date: 2021-08-30T15:47:20.658Z
        - commits:
            - subject: 'tests: remove reboot requirement from NTP server test'
              hash: 47deb00854eefc2c8ca4103d934713d26077a7c8
              body: |
                We no longer require a reboot when changing the NTP server
                configuration in config.json. Changes to 'config-json' will
                automatically trigger the 'balena-ntp-config' service which will
                update the NTP sources.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'tests: remove reboot requirement from NTP server test'
                changelog-entry: 'tests: remove reboot requirement from NTP server test'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'recipes-connectivity: fix auto-update when config.json changes'
              hash: 85df30628278eeb0d55e731319391d3cf98df9a8
              body: >
                Since adding the 'config-json' systemd target the
                'balena-ntp-config'

                and 'prepare-openvpn' services have stopped running
                automatically

                when config.json is updated. This is fixed by adding

                'RemainAfterExit=yes' to both service files.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'recipes-connectivity: fix auto-update when config.json changes'
                changelog-entry: 'recipes-connectivity: fix auto-update when config.json changes'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.14
          date: 2021-08-26T17:54:07.640Z
        - commits:
            - subject: 'networkmanager: fix hostname race condition'
              hash: 3f2486bc91994d360086694df9f01bb4b6777284
              body: >
                Fix a race condition that can occur when setting the hostname at

                boot by disabling NetworkManager's ability to modify the
                hostname.

                The static and transient system hostnames are now managed
                exclusively

                by the 'balena-hostname' service.
              footer:
                Change-type: patch
                change-type: patch
                Connects-to: '#2244'
                connects-to: '#2244'
                Changelog-entry: 'networkmanager: fix hostname race condition'
                changelog-entry: 'networkmanager: fix hostname race condition'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.13
          date: 2021-08-26T12:17:00.556Z
        - commits:
            - subject: 'tests: remove reboot requirement from hostname test'
              hash: 34687ca76515d57a77ba12c0fd44632518181392
              body: >
                We no longer require reboots when changing hostname in
                config.json.

                The contents of '/etc/hostname' and the avahi mDNS broadcast
                hostname

                are updated automatically without requiring a reboot.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'tests: remove reboot requirement from hostname test'
                changelog-entry: 'tests: remove reboot requirement from hostname test'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
            - subject: 'hostname: update system hostname when config.json changes'
              hash: f7b3d37502f03ca65d3352a8a8cc3b8a5d612ff4
              body: >
                Automatically update the system hostname when config.json
                changes.


                Changes to 'config.json' will trigger the 'balena-hostname'
                service

                to update the static and transient hostnames and the 'avahi'

                service to ensure that any hostname changes are broadcast via
                mDNS.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'hostname: update system hostname when config.json changes'
                changelog-entry: 'hostname: update system hostname when config.json changes'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.12
          date: 2021-08-25T23:51:01.153Z
        - commits:
            - subject: 'linux-firmware: Use wildcards when selecting files to package'
              hash: 16598bcffda7206d9a2ab9d96860cecf7de62756
              body: >
                Firmware files can be compressed with an xz extension or not, so
                use

                wildcards to cover both cases.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'linux-firmware: Add firmware compression support'
              hash: 2ee6d2e652772d28c25df94aa400e7ccd9f207de
              body: >
                This commit adds a FIRMWARE_COMPRESSION distro configuration
                that

                performs the compression of linux-firmware files. Only kernel
                versions

                above 5.3 support loading compressed firmware.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: >-
                kernel-balena: Support firmware compression from kernel version
                5.3
              hash: c8faa130b88f11af86619d69a115be96dfbc894a
              body: >
                Kernel version 5.3 supports loading compressed firmware files
                saving

                storage space.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.11
          date: 2021-08-24T14:52:41.041Z
  version: 2.85.2+rev1
  date: 2021-11-06T18:53:55.020Z
- commits:
    - subject: Update balena-yocto-scripts from v1.14.8 to v1.15.8
      hash: d13dec15539e80f0451507ae2c1cd0437c128d1a
      body: |
        Update balena-yocto-scripts from 1.14.8 to 1.15.8
      footer:
        Changelog-entry: Update balena-yocto-scripts from v1.14.8 to v1.15.8
        changelog-entry: Update balena-yocto-scripts from v1.14.8 to v1.15.8
        Signed-off-by: Alexandru Costache <alexandru@balena.io>
        signed-off-by: Alexandru Costache <alexandru@balena.io>
      author: Alexandru Costache
      nested:
        - commits:
            - subject: 'Dockerfile_yocto-build-env: Install Honister host deps'
              hash: efc069c609431965394912d3ffd34362a1108852
              body: >
                See
                http://docs.yoctoproject.org/next/migration-guides/migration-3.4.html#new-host-dependencies
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alexandru Costache <alexandru@balena.io>
                signed-off-by: Alexandru Costache <alexandru@balena.io>
              author: Alexandru Costache
              nested: []
          version: balena-yocto-scripts-1.15.8
          date: 2021-11-03T10:01:44.980Z
        - commits:
            - subject: 'jenkins_build.sh: Fix deployment for discontinued device types'
              hash: 84e65e937fef38625277fb8330ebd3179c466d04
              body: >
                Do not deploy dockerhub or hostapp images for discontinued
                device types.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_build.sh: Remove PRIVATE_DT as it is unused'
              hash: 35fd54620ff5eb487b1323a1ead5fef9c157e385
              body: >
                The private device types status is checked with the API when
                required.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'jenkins_build.sh: Fix lint warnings'
              hash: 068a4197101a2db4aba60793e01564b67d14f820
              body: |
                Fix some minor lint warnings.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.15.7
          date: 2021-10-25T16:57:03.955Z
        - commits:
            - subject: >-
                balena-generate-ami.sh: wait for boot partition when preloading
                AMI
              hash: d2ea170a86810a782eeb241e178d4ad72c4939b0
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.6
          date: 2021-10-21T15:04:37.774Z
        - commits:
            - subject: >-
                jenkins_generate_ami.sh: Use a shared directory for preloaded
                image
              hash: 9b032f2fddc970db13147b4e637abd1bada1f234
              body: >
                The previous commit moved the preloaded image out of yocto
                cache, which

                made it unreachable from the balena-generate-ami-env container.


                This patch makes mktemp create the file back within yocto cache
                to ensure

                this is shared yet still each concurrent process can safely have
                its own copy.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.5
          date: 2021-10-21T04:50:17.146Z
        - commits:
            - subject: 'barys: update development image variables'
              hash: 427510332026ca8636dedb6630632a740b481374
              body: |
                Update the DEVELOPMENT_IMAGE references to use OS_DEVELOPMENT
                following the changes to the handling of OS variants.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'barys: update development image variables'
                changelog-entry: 'barys: update development image variables'
                Signed-off-by: Mark Corbin mark@balena.io
                signed-off-by: Mark Corbin mark@balena.io
              author: Mark Corbin
              nested: []
          version: balena-yocto-scripts-1.15.4
          date: 2021-10-20T09:40:14.890Z
        - commits:
            - subject: 'jenkins_generate_ami.sh: Preload outside of yocto cache'
              hash: fb1763984d76218adc2510da6cb673fbad7197be
              body: >
                Since the file name is hardcoded at this moment, this fails when
                two

                builds are running in parallel (e.g. dev and prod variants
                during deploy)

                because they try to preload the same file at pretty much the
                same moment.

                Having a separate copy for each outside of yocto cache should
                fix the issue.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.3
          date: 2021-10-20T05:12:57.093Z
        - commits:
            - subject: >-
                balena-generate-ami.sh: correctly mount boot partition when
                injecting SSH key
              hash: c0f6da3e4fe3f9c51ba8b279986a6f4baffe6d96
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.2
          date: 2021-10-01T14:45:58.407Z
        - commits:
            - subject: Update balena-cli to 12.50.1
              hash: 700ebe6d06385440488a42c42179d19434376209
              body: >
                This is necessary for AMI preloading to work, additionally

                it has been more than a year since the last update, we should
                keep up.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: Update balena-cli to 12.50.1
                changelog-entry: Update balena-cli to 12.50.1
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
          version: balena-yocto-scripts-1.15.1
          date: 2021-10-01T10:11:14.438Z
        - commits:
            - subject: >-
                jenkins_generate_ami.sh: Use lib function to get arch from
                config.json
              hash: fffe9ffb363c9eed783a5055e69847c81eb68bcd
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: >-
                balena-generate-ami.sh: Look for boot partition by label rather
                than hardcoding p1
              hash: 45786e701d05811f96d0aeef20481442bb1d0f1c
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: 'balena-generate-ami.sh: Fail if AMI already exists'
              hash: 9e9a792aed2a659c1ed7327237a61594033b308a
              body: >
                This was only ignored for development purposes, we should not
                replace

                released images.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: 'balena-generate-ami.sh: sync after writing config.json'
              hash: f0838aaee9751a6fb60558a7646d597b1f99b1c3
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: 'balena-generate-ami.sh: Stick to POSIX-compliant [ instead of [['
              hash: 2c6a97c263a71c63387290fca29ba5b01eba8db4
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: 'balena-generate-ami.sh: Remove useless statements'
              hash: 9d4ac02f3ad8eadaed79703dbc859c4950449810
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: >-
                jenkins_generate_ami.sh: Use architecture as suffix instead of
                machine name
              hash: 7d2e3911defedc500b3b1ded3268dbe74bb523b0
              body: >
                This removes the necessity for the DT being named generic-*. It
                also means

                all the DTs of the same architecture will preload the same app.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: 'jenkins_build.sh: pass MACHINE to jenkins_generate_ami.sh'
              hash: 0e33582e2860474e1c6aff5275539b1333aef6b9
              body: >
                This removes the dependency on JOB_NAME from
                jenkins_generate_ami.sh
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: 'AMI automation: Adjust AMI names to be compatible with AWS API'
              hash: bc91b7036b32aa57c053c115ac87b7f21fa634c8
              body: ''
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: 'AMI automation: Correct S3 bucket name and key'
              hash: 8864adcb20c1f4cbfd48e422dbae44b885c8ca06
              body: ''
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: 'AMI automation: Add a separate container for generaing AMI'
              hash: d7d91ff4c3ea655dfa9a483a020d2d16aa5e0f49
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Michal Toman <michalt@balena.io>
                signed-off-by: Michal Toman <michalt@balena.io>
              author: Michal Toman
              nested: []
            - subject: 'AMI automation: shellcheck and resolve violations'
              hash: 6b11dd26bc1229aafed98c5933f23e892811f49f
              body: ''
              footer:
                Change-type: patch
                change-type: patch
              author: ab77
              nested: []
            - subject: 'AMI automation: Use staging env by default'
              hash: 21fa55a6f73faf59fe5fc3b1e6e8bc4084e17c01
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
            - subject: 'AMI automation: Simplify public ssh addition. Do not use sudo'
              hash: dd96771607f79620a241e4dee99879542643f55f
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
            - subject: 'automation: Generate and publish AMI from the raw balenaOS image'
              hash: efe2b5beb5ea6b00fff07372a312c7e0c690654b
              body: ''
              footer:
                Change-type: minor
                change-type: minor
                Signed-off-by: Tomás Tormo <tomast@balena.io>
                signed-off-by: Tomás Tormo <tomast@balena.io>
              author: Tomás Tormo
              nested: []
          version: balena-yocto-scripts-1.15.0
          date: 2021-10-01T04:12:24.310Z
        - commits:
            - subject: >-
                balena-deploy: When deploying hostapp default to using slug as
                name
              hash: d9ee5fa5f5a97de9c41c2acc13b6c7335e2b043f
              body: >
                Using the device type is incorrect as aliases are not taken into
                account.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'balena-api: Do not use balena_lib_resolve_aliases'
              hash: d50cee134436914b4960254abd0a5cf28b40f764
              body: >
                That function is now for internal use, replace with
                balena_lig_get_slug()

                which is clearer.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: >-
                balena_lib: Make resolve_aliases local so it is not globally
                used
              hash: 45a0f62debdbf9e20d56e8bba8a9567359d7e8e4
              body: >
                The correct call is balena_lib_get_slug(device_type), which
                resolves

                aliases too.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: balena-yocto-scripts-1.14.9
          date: 2021-08-20T17:33:15.811Z
  version: 2.83.10+rev3
  date: 2021-11-05T08:31:48.138Z
- commits:
    - subject: 'balena-image: Install boot overlays in the root partition'
      hash: b8de2384bf0351829d574b1964324f7f0a69108a
      body: ''
      footer:
        Signed-off-by: Alexandru Costache <alexandru@balena.io>
        signed-off-by: Alexandru Costache <alexandru@balena.io>
        Changelog-entry: 'balena-image: Install boot overlays in the root partition'
        changelog-entry: 'balena-image: Install boot overlays in the root partition'
      author: Alexandru Costache
      nested: []
  version: 2.83.10+rev2
  date: 2021-09-29T11:24:06.775Z
- commits:
    - subject: Update meta-balena from v2.83.5 to v2.83.10
      hash: 9fbfab9f41608329bcf308fc16d714e32d98596a
      body: |
        Update meta-balena from 2.83.5 to 2.83.10
      footer:
        Changelog-entry: Update meta-balena from v2.83.5 to v2.83.10
        changelog-entry: Update meta-balena from v2.83.5 to v2.83.10
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested:
        - commits:
            - subject: >-
                kernel-balena: Add function to conditionally configure based on
                version
              hash: 9787d2879d2f372c19f336c7e08bd0e6fee16ae7
              body: >
                Some kernel configuration are only applicable from specific
                kernel

                versions. This commit adds a function that allows to add a
                specific

                configuration set only from a given kernel version.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'kernel-balena: Split function to get kernel version from source'
              hash: c349f647db328558f026f1b914bc0246dc33bda5
              body: >
                This allows to re-use this functionality. Note that the
                `KERNEL_VERSION`

                variable is only available after the kernel has been built as it
                relies

                on get_kernelversion_headers() poky function and utsrelease.h
                being

                generated. This function parses the Makefile so only needs the
                source.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'kernel-resin: Add as symlink to kernel-balena'
              hash: 129128574dbf38c46c0cc7121cdf6fd0f38ef64b
              body: |
                This avoids introducing a breaking change.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
            - subject: 'kernel-balena: Replace and deprecate kernel-resin'
              hash: 8c0d2ce52d42e72a939d248784d67dc2413c0443
              body: >
                New device types should use kernel-balena instead of
                kernel-resin.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested: []
          version: meta-balena-2.83.10
          date: 2021-08-18T19:03:21.519Z
        - commits:
            - subject: 'recipes-connectivity: improve NTP dispatcher script'
              hash: d060bfa3581f6920fa2e353abaf82d2913d60e67
              body: >
                Change the NetworkManager NTP dispatcher script to update the

                on/offline status of the NTP sources on 'connectivity-change'
                events

                instead of 'up/down' events.


                Currently 'chronyc onoffline' is run for 'up/down' events on any

                network interface. It makes more sense to run it for

                'connectivity-change' events as we are really interested in
                whether

                the internet is there or not rather than whether an interface is

                up or down.
              footer:
                Change-type: patch
                change-type: patch
                Changelog-entry: 'recipes-connectivity: improve NTP dispatcher script'
                changelog-entry: 'recipes-connectivity: improve NTP dispatcher script'
                Signed-off-by: Mark Corbin <mark@balena.io>
                signed-off-by: Mark Corbin <mark@balena.io>
              author: Mark Corbin
              nested: []
          version: meta-balena-2.83.9
          date: 2021-08-17T10:37:50.423Z
        - commits:
            - subject: Update balena-engine to v19.03.24
              hash: 1d3d0d0c8ef60710eaa67d68b5f606eb22e6fd28
              body: |
                Update balena-engine from 19.03.23 to 19.03.24
              footer:
                Changelog-entry: Update balena-engine to v19.03.24
                changelog-entry: Update balena-engine to v19.03.24
                Change-type: patch
                change-type: patch
                Signed-off-by: Alex Gonzalez <alexg@balena.io>
                signed-off-by: Alex Gonzalez <alexg@balena.io>
              author: Alex Gonzalez
              nested:
                - commits:
                    - subject: prevent slice oob access in concatReadSeekCloser
                      hash: 1e7045ac957db17fe9838602c9339c0b5ae5c282
                      body: ''
                      footer:
                        Change-type: patch
                        change-type: patch
                      author: Martin Rauscher
                      nested: []
                  version: balena-engine-19.03.24
                  date: 2021-08-12T08:30:08.031Z
          version: meta-balena-2.83.8
          date: 2021-08-17T07:29:06.381Z
        - commits:
            - subject: 'grub: don''t package or install bindir utils'
              hash: f1835282ecd3b0f9dfc52410d8f1628653e2c1b2
              body: >
                Remove ${bindir} from FILES_grub-common, ensuring grub utilities
                aren't

                installed to /usr/bin, in addition to a previous similar commit
                that

                removed sbin utils. This frees approximately 5.5M.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.7
          date: 2021-08-14T14:48:17.382Z
        - commits:
            - subject: 'balena-os-sysctl: disable user namespacing by default'
              hash: 31c3ae8ad5c7ad45e450349b6972524da120e96c
              body: >
                Most major distributions now ship kernels with user namespacing
                enabled

                in the kernel config. Some distributions, such as Arch and
                Ubuntu,

                default to the upstream behavior of allowing unprivileged user

                namespacing, regardless of potential attack surfaces exposed in
                the

                kernel.


                Other distributions, such as Debian, are slightly more
                conservative,

                disabling the feature at runtime behind a sysctl tunable. Debian

                maintains its own patch to add the
                kernel.unprivileged_userns_clone

                tunable.


                The Debian patch was rejected by upstream over fears of
                application

                developers not using this feature due to it being generally
                unavailable

                in systems, as well as fears of bugs going undiscovered.


                RHEL uses a newer tunable introduced upstream to set the max
                number of

                user namespaces to zero, which accomplishes the same thing, but
                without

                an out of tree patch.


                Disable user namespacing at runtime using the same method as
                RHEL, in

                the same manner as the hardened kernels and distributions have
                chosen.


                https://lwn.net/Articles/673597/

                https://lists.debian.org/debian-kernel/2020/03/msg00237.html
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: 'common: kernel-resin: enable user namespacing'
              hash: 04d9561760b449024a5b411bd366ded2351cd5cd
              body: >
                Enable CONFIG_USER_NS, a kernel feature used for user
                namespacing, and

                required for docker-in-docker.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.6
          date: 2021-08-13T16:30:49.145Z
  version: 2.83.10+rev1
  date: 2021-08-23T07:34:05.152Z
- commits:
    - subject: Improve the provisioning instructions for rockpi-4b-rk3399
      hash: a075368db52e55524e99efb5401dd5d659b3cbc7
      body: ''
      footer:
        Changelog-entry: Improve the provisioning instructions for rockpi-4b-rk3399
        changelog-entry: Improve the provisioning instructions for rockpi-4b-rk3399
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.5+rev3
  date: 2021-08-18T14:13:55.253Z
- commits:
    - subject: Add missing u-boot hostapp update hook
      hash: ba4d646763a484f9e7e2a01f6ac2627d67aa1c21
      body: |
        We need this hook for u-boot based boards
      footer:
        Changelog-entry: Add missing u-boot hostapp update hook
        changelog-entry: Add missing u-boot hostapp update hook
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.5+rev2
  date: 2021-08-14T03:20:22.071Z
- commits:
    - subject: Update meta-balena from v2.83.1 to v2.83.5
      hash: b9df3f234505b8cb84d99ab86aa64485916ada7c
      body: |
        Update meta-balena from 2.83.1 to 2.83.5
      footer:
        Changelog-entry: Update meta-balena from v2.83.1 to v2.83.5
        changelog-entry: Update meta-balena from v2.83.1 to v2.83.5
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested:
        - commits:
            - subject: >-
                resin-u-boot.bbclass: Make console silencing change more
                resilient
              hash: 6f173d763828d63f70582219aa19333b1e599a57
              body: >
                There is at least a case in a board where the puts function in
                u-boot's

                common/console.c is #ifdef'ed and defined twice. Let's
                accomodate for

                such cases by correctly looping through more than one function

                definition if present.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Florin Sarbu <florin@balena.io>
                signed-off-by: Florin Sarbu <florin@balena.io>
              author: Florin Sarbu
              nested: []
          version: meta-balena-2.83.5
          date: 2021-08-13T08:16:50.739Z
        - commits:
            - subject: 'balena-os: pin linux-firmware to 20210511 from hardknott'
              hash: e7a72c3e82587ffd2388656de71340afdddc9156
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
            - subject: 'linux-firmware: upgrade 20190815 -> 20210511'
              hash: 497fa316fec3ef99a14872208abb85f7e932922d
              body: |
                Add recipe from poky hardknott, revision 74dbb08
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Joseph Kogut <joseph@balena.io>
                signed-off-by: Joseph Kogut <joseph@balena.io>
              author: Joseph Kogut
              nested: []
          version: meta-balena-2.83.4
          date: 2021-08-11T16:09:10.911Z
        - commits:
            - subject: 'supervisor: Consolidate supervisor container removal'
              hash: f533be0ee1d6f42801f29426929e5f8b18035b9b
              body: |
                Avoid removing supervisor containers in 3 different places
                and consolidate the steps into start-balena-supervisor.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: meta-balena-2.83.3
          date: 2021-08-05T18:58:49.620Z
        - commits:
            - subject: 'tests: Fix insecure registry error'
              hash: 647d683dbfd0461706e75291c5396752fdc1b2ce
              body: >
                introduced when images including
                8227a61f6bef6d93cc6a5acd0ef93a2012079964

                made it to production.

                We can now use a runtime drop-in unit placed under /run/systemd/
                to

                configure the balena-host service, which doesn't require us to
                remount

                the rootfs.
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Robert Günzler <robertg@balena.io>
                signed-off-by: Robert Günzler <robertg@balena.io>
              author: Robert Günzler
              nested: []
          version: meta-balena-2.83.2
          date: 2021-08-05T13:55:32.372Z
    - subject: Update balena-yocto-scripts from v1.14.7 to v1.14.8
      hash: 8a69515b9e9e2cf136b317e2d68ef2477464f8f3
      body: |
        Update balena-yocto-scripts from 1.14.7 to 1.14.8
      footer:
        Changelog-entry: Update balena-yocto-scripts from v1.14.7 to v1.14.8
        changelog-entry: Update balena-yocto-scripts from v1.14.7 to v1.14.8
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested:
        - commits:
            - subject: Use slug when setting deviceType for leviathan
              hash: bc628771aa0014e86e649e3312b48e1c7ae4968c
              body: ''
              footer:
                Change-type: patch
                change-type: patch
                Signed-off-by: Kyle Harding <kyle@balena.io>
                signed-off-by: Kyle Harding <kyle@balena.io>
              author: Kyle Harding
              nested: []
          version: balena-yocto-scripts-1.14.8
          date: 2021-07-22T14:51:50.560Z
    - subject: Add balena-yocto-scripts upstream source
      hash: ba5dbf5d280fce00f834c9effe3038699d50b1c5
      body: >
        This allows to add nested changelogs from the balena-yocto-scripts
        repository

        from version >= 1.14.1
      footer:
        Changelog-entry: Add balena-yocto-scripts upstream source
        changelog-entry: Add balena-yocto-scripts upstream source
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.5+rev1
  date: 2021-08-13T15:52:18.818Z
- commits:
    - subject: Fix bluetooth on rockpi-4b-rk3399
      hash: 8e3c8191353729e09246875a1f102ac04f514951
      body: ''
      footer:
        Changelog-entry: Fix bluetooth on rockpi-4b-rk3399
        changelog-entry: Fix bluetooth on rockpi-4b-rk3399
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.1+rev3
  date: 2021-08-12T14:39:04.763Z
- commits:
    - subject: Fix boot partition number in rockpi-4b-rk3399.coffee
      hash: 2e3aa7891a4263701cd9bcc76c3e90b958768f8b
      body: |
        The rockpi-4b-rk3399 uses a different partitioning scheme
        so let's set here the correct boot partition number.
      footer:
        Changelog-entry: Fix boot partition number in rockpi-4b-rk3399.coffee
        changelog-entry: Fix boot partition number in rockpi-4b-rk3399.coffee
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.1+rev2
  date: 2021-08-04T14:57:38.470Z
- commits:
    - subject: Add initial support for rockpi-4b-rk3399
      hash: 4781a9b258391b2f027d811e99bcb6f9bdebb87a
      body: ''
      footer:
        Changelog-entry: Add initial support for rockpi-4b-rk3399
        changelog-entry: Add initial support for rockpi-4b-rk3399
        Signed-off-by: Florin Sarbu <florin@balena.io>
        signed-off-by: Florin Sarbu <florin@balena.io>
      author: Florin Sarbu
      nested: []
  version: 2.83.1+rev1
  date: 2021-08-04T13:09:22.399Z
